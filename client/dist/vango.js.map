{
  "version": 3,
  "sources": ["../src/index.js", "../src/utils.js", "../src/codec.js", "../src/websocket.js", "../src/events.js", "../src/patches.js", "../src/optimistic.js", "../src/hooks/sortable.js", "../src/hooks/draggable.js", "../src/hooks/droppable.js", "../src/hooks/resizable.js", "../src/hooks/tooltip.js", "../src/hooks/dropdown.js", "../src/hooks/collapsible.js", "../src/hooks/focustrap.js", "../src/hooks/portal.js", "../src/hooks/dialog.js", "../src/hooks/popover.js", "../src/hooks/manager.js", "../src/connection.js", "../src/url.js", "../src/prefs.js"],
  "sourcesContent": ["/**\n * Vango Thin Client\n *\n * Minimal runtime for server-driven web applications.\n * Connects to server via WebSocket, captures events, applies patches.\n *\n * Target size: < 15KB gzipped\n */\n\nimport { BinaryCodec, EventType } from './codec.js';\nimport { WebSocketManager } from './websocket.js';\nimport { EventCapture } from './events.js';\nimport { PatchApplier } from './patches.js';\nimport { OptimisticUpdates } from './optimistic.js';\nimport { HookManager } from './hooks/manager.js';\nimport { ensurePortalRoot } from './hooks/portal.js';\nimport { ConnectionManager, injectDefaultStyles } from './connection.js';\nimport { URLManager } from './url.js';\nimport { PrefManager, MergeStrategy } from './prefs.js';\n\n/**\n * Frame type constants for wire protocol\n * Must match pkg/protocol/frame.go\n */\nconst FrameType = {\n    HANDSHAKE: 0x00,\n    EVENT: 0x01,\n    PATCHES: 0x02,\n    CONTROL: 0x03,\n    ACK: 0x04,\n    ERROR: 0x05,\n};\n\n/**\n * Control message subtypes\n * Must match vango/pkg/protocol/control.go\n */\nconst ControlType = {\n    PING: 0x01,\n    PONG: 0x02,\n    RESYNC_REQUEST: 0x10,  // Client -> Server: request missed patches\n    RESYNC_PATCHES: 0x11,  // Server -> Client: replay missed patches (not used with frame replay)\n    RESYNC_FULL: 0x12,     // Server -> Client: full HTML replacement\n    CLOSE: 0x20,\n};\n\n/**\n * VangoClient - Main client class\n */\nexport class VangoClient {\n    constructor(options = {}) {\n        this.options = {\n            wsUrl: options.wsUrl || this._defaultWsUrl(),\n            reconnect: options.reconnect !== false,\n            reconnectInterval: options.reconnectInterval || 1000,\n            reconnectMaxInterval: options.reconnectMaxInterval || 30000,\n            heartbeatInterval: options.heartbeatInterval || 30000,\n            debug: options.debug || false,\n            ...options,\n        };\n\n        // Core components\n        this.codec = new BinaryCodec();\n        this.nodeMap = new Map(); // hid -> DOM node\n        this.connected = false;\n        this.seq = 0; // Event sequence number\n\n        // Patch sequence tracking (Phase 2)\n        this.patchSeq = 0;              // Last successfully applied patch sequence\n        this.expectedPatchSeq = 1;      // Next expected patch sequence\n        this.pendingResync = false;     // Debounce resync requests\n\n        // Sub-systems\n        this.wsManager = new WebSocketManager(this, this.options);\n        this.patchApplier = new PatchApplier(this);\n        this.eventCapture = new EventCapture(this);\n        this.optimistic = new OptimisticUpdates(this);\n        this.hooks = new HookManager(this);\n        this.connection = new ConnectionManager({\n            toastOnReconnect: options.toastOnReconnect || window.__VANGO_TOAST_ON_RECONNECT__,\n            toastMessage: options.toastMessage || 'Connection restored',\n            maxRetries: options.maxRetries || 10,\n            baseDelay: options.reconnectInterval || 1000,\n            maxDelay: options.reconnectMaxInterval || 30000,\n            debug: options.debug,\n        });\n        this.urlManager = new URLManager(this, { debug: options.debug });\n        this.prefs = new PrefManager(this, { debug: options.debug });\n\n        // Callbacks\n        this.onConnect = options.onConnect || (() => { });\n        this.onDisconnect = options.onDisconnect || (() => { });\n        this.onError = options.onError || ((err) => console.error('[Vango]', err));\n\n        // Initialize portal root early to avoid race conditions\n        ensurePortalRoot();\n\n        // Inject default connection styles\n        injectDefaultStyles();\n\n        // Initialize\n        this._buildNodeMap();\n        this.wsManager.connect(this.options.wsUrl);\n        this.eventCapture.attach();\n        this.hooks.initializeFromDOM();\n    }\n\n    /**\n     * Build initial map of data-hid -> DOM node\n     */\n    _buildNodeMap() {\n        document.querySelectorAll('[data-hid]').forEach(el => {\n            const hid = el.dataset.hid;\n            this.nodeMap.set(hid, el);\n        });\n\n        if (this.options.debug) {\n            console.log(`[Vango] Mapped ${this.nodeMap.size} nodes`);\n        }\n    }\n\n    /**\n     * Get default WebSocket URL based on current page\n     */\n    _defaultWsUrl() {\n        const protocol = location.protocol === 'https:' ? 'wss:' : 'ws:';\n        const path = encodeURIComponent(location.pathname + location.search);\n        return `${protocol}//${location.host}/_vango/live?path=${path}`;\n    }\n\n    /**\n     * Called when WebSocket connection established\n     */\n    _onConnected() {\n        this.connected = true;\n        this.connection.onConnect();\n        this.onConnect();\n    }\n\n    /**\n     * Called when WebSocket disconnected\n     */\n    _onDisconnected() {\n        this.connected = false;\n        this.connection.onDisconnect();\n        this.onDisconnect();\n    }\n\n    /**\n     * Called on WebSocket error\n     */\n    _onError(err) {\n        this.onError(err);\n    }\n\n    /**\n     * Handle binary message from server\n     */\n    _handleBinaryMessage(buffer) {\n        if (buffer.length < 4) return; // Need at least frame header\n\n        // Frame header: [type:1][flags:1][length:2 big-endian]\n        const frameType = buffer[0];\n        const length = (buffer[2] << 8) | buffer[3];\n        const payload = buffer.slice(4, 4 + length);\n\n        switch (frameType) {\n            case FrameType.PATCHES:\n                this._handlePatches(payload);\n                break;\n            case FrameType.CONTROL:\n                this._handleControl(payload);\n                break;\n            case FrameType.ERROR:\n                this._handleServerError(payload);\n                break;\n            default:\n                if (this.options.debug) {\n                    console.warn('[Vango] Unknown frame type:', frameType);\n                }\n        }\n    }\n\n    /**\n     * Handle patches frame\n     */\n    _handlePatches(buffer) {\n        if (this.options.debug) {\n            console.log('[Vango] Received patches buffer, length:', buffer.length);\n        }\n\n        const { seq, patches } = this.codec.decodePatches(buffer);\n\n        if (this.options.debug) {\n            console.log('[Vango] Decoded', patches.length, 'patches, seq:', seq);\n        }\n\n        // Handle duplicate/replayed frame (seq < expected)\n        if (seq < this.expectedPatchSeq) {\n            if (this.options.debug) {\n                console.log('[Vango] Ignoring duplicate patch seq:', seq, 'expected:', this.expectedPatchSeq);\n            }\n            return;\n        }\n\n        // Check for sequence gap (seq > expected means we missed some)\n        if (seq > this.expectedPatchSeq) {\n            console.warn('[Vango] Patch sequence gap detected',\n                'expected:', this.expectedPatchSeq,\n                'received:', seq);\n            this._requestResync(this.patchSeq);\n            return; // Don't apply out-of-order patches\n        }\n\n        if (this.options.debug) {\n            for (const p of patches) {\n                console.log('[Vango] Patch:', p);\n            }\n            console.log('[Vango] Applying', patches.length, 'patches (seq:', seq, ')');\n        }\n\n        // Clear any pending optimistic updates that server confirmed\n        this.optimistic.clearPending();\n\n        // Apply patches to DOM\n        this.patchApplier.apply(patches);\n\n        // Re-initialize hooks on new elements\n        this.hooks.updateFromDOM();\n\n        // Update sequence tracking\n        this.patchSeq = seq;\n        this.expectedPatchSeq = seq + 1;\n        this.pendingResync = false; // Clear resync flag on successful apply\n\n        // Send ACK to server\n        this._sendAck(seq);\n    }\n\n    /**\n     * Handle control message\n     */\n    _handleControl(buffer) {\n        if (buffer.length === 0) return;\n\n        const controlType = buffer[0];\n\n        switch (controlType) {\n            case ControlType.PONG:\n                // Heartbeat acknowledged\n                if (this.options.debug) {\n                    console.log('[Vango] Pong received');\n                }\n                break;\n            case ControlType.RESYNC_FULL:\n                // Server sends full HTML to replace body\n                this._handleResyncFull(buffer.slice(1));\n                break;\n            case ControlType.CLOSE:\n                // Server requesting close\n                this.wsManager.close();\n                break;\n            default:\n                if (this.options.debug) {\n                    console.log('[Vango] Unknown control type:', controlType);\n                }\n        }\n    }\n\n    /**\n     * Handle ResyncFull - replace body content with server-sent HTML\n     * Used during session resume to ensure client DOM matches server state\n     */\n    _handleResyncFull(buffer) {\n        if (buffer.length === 0) return;\n\n        // Decode HTML string (varint length-prefixed)\n        const { value: html } = this.codec.decodeString(buffer, 0);\n\n        if (this.options.debug) {\n            console.log('[Vango] ResyncFull received, replacing body content');\n        }\n\n        // Create template to parse HTML\n        const template = document.createElement('template');\n        template.innerHTML = html;\n\n        // Clear existing node map\n        this.nodeMap.clear();\n\n        // Destroy existing hooks before replacing DOM\n        this.hooks.destroyAll();\n\n        // Replace body children\n        document.body.innerHTML = '';\n        while (template.content.firstChild) {\n            document.body.appendChild(template.content.firstChild);\n        }\n\n        // Rebuild node map from new DOM\n        this._buildNodeMap();\n\n        // Reinitialize hooks on new elements\n        this.hooks.initializeFromDOM();\n\n        // Reset patch sequence tracking after full resync\n        this.patchSeq = 0;\n        this.expectedPatchSeq = 1;\n        this.pendingResync = false;\n    }\n\n    /**\n     * Send ACK for received patches\n     * Format: [lastSeq:varint][window:varint]\n     */\n    _sendAck(lastSeq) {\n        if (!this.connected) return;\n\n        const payload = this.codec.encodeAck(lastSeq, 100); // window = 100\n        const frame = this._encodeFrame(FrameType.ACK, payload);\n        this.wsManager.send(frame);\n\n        if (this.options.debug) {\n            console.log('[Vango] Sent ACK for seq:', lastSeq);\n        }\n    }\n\n    /**\n     * Request resync for missed patches (with debouncing)\n     * Format: [controlType:1][lastSeq:varint]\n     */\n    _requestResync(lastSeq) {\n        // Debounce: only one resync request at a time\n        if (this.pendingResync) {\n            if (this.options.debug) {\n                console.log('[Vango] Resync already pending, skipping');\n            }\n            return;\n        }\n        this.pendingResync = true;\n\n        if (this.options.debug) {\n            console.log('[Vango] Requesting resync from seq:', lastSeq);\n        }\n\n        const payload = this.codec.encodeResyncRequest(lastSeq);\n        const frame = this._encodeFrame(FrameType.CONTROL, payload);\n        this.wsManager.send(frame);\n    }\n\n    /**\n     * Handle server error\n     *\n     * Per spec Section 9.6.2 (error wire format):\n     * Wire format: [uint16:code][varint-string:message][bool:fatal]\n     * See vango/pkg/protocol/error.go for encoding.\n     */\n    _handleServerError(buffer) {\n        if (buffer.length < 3) return;\n\n        // Decode code (2 bytes, big-endian)\n        const code = (buffer[0] << 8) | buffer[1];\n\n        // Decode varint-length string starting at offset 2\n        const { value: message, bytesRead } = this.codec.decodeString(buffer, 2);\n\n        // Fatal flag is 1 byte after the message\n        const fatalOffset = 2 + bytesRead;\n        const fatal = fatalOffset < buffer.length ? buffer[fatalOffset] === 1 : false;\n\n        // Error code registry - matches vango/pkg/protocol/error.go\n        const errorMessages = {\n            0x0000: 'Unknown error',\n            0x0001: 'Invalid frame',\n            0x0002: 'Invalid event',\n            0x0003: 'Handler not found',\n            0x0004: 'Handler panic',\n            0x0005: 'Session expired',\n            0x0006: 'Rate limited',\n            0x0100: 'Server error',\n            0x0101: 'Not authorized',\n            0x0102: 'Not found',\n            0x0103: 'Validation failed',\n            0x0104: 'Route error',\n        };\n\n        const errorMessage = errorMessages[code] || message || `Unknown error: ${code}`;\n        const error = new Error(errorMessage);\n        error.code = code;\n        error.fatal = fatal;\n\n        this.onError(error);\n\n        // Revert optimistic updates on error\n        this.optimistic.revertAll();\n\n        if (fatal) {\n            this.wsManager.close();\n        }\n    }\n\n    /**\n     * Send event to server\n     */\n    sendEvent(type, hid, data = null) {\n        if (!this.connected) {\n            if (this.options.debug) {\n                console.log('[Vango] Not connected, queueing event');\n            }\n        }\n\n        this.seq++;\n        const eventBuffer = this.codec.encodeEvent(this.seq, type, hid, data);\n\n        // Wrap in frame with 4-byte header: [type][flags][length-hi][length-lo]\n        const frame = this._encodeFrame(FrameType.EVENT, eventBuffer);\n\n        this.wsManager.send(frame);\n\n        if (this.options.debug) {\n            console.log('[Vango] Sent event:', { type, hid, data, seq: this.seq });\n        }\n    }\n\n    /**\n     * Encode a frame with proper header\n     * Format: [type:1][flags:1][length:2 big-endian][payload]\n     */\n    _encodeFrame(frameType, payload) {\n        const length = payload.length;\n        const frame = new Uint8Array(4 + length);\n        frame[0] = frameType;\n        frame[1] = 0; // flags\n        frame[2] = (length >> 8) & 0xFF; // length high byte\n        frame[3] = length & 0xFF; // length low byte\n        frame.set(payload, 4);\n        return frame;\n    }\n\n    /**\n     * Send hook event to server\n     */\n    sendHookEvent(hid, eventName, data = {}) {\n        this.sendEvent(EventType.HOOK, hid, { name: eventName, data });\n    }\n\n    /**\n     * Get DOM node by hydration ID\n     */\n    getNode(hid) {\n        return this.nodeMap.get(hid);\n    }\n\n    /**\n     * Register a node in the map\n     */\n    registerNode(hid, node) {\n        this.nodeMap.set(hid, node);\n    }\n\n    /**\n     * Unregister a node from the map\n     */\n    unregisterNode(hid) {\n        this.nodeMap.delete(hid);\n    }\n\n    /**\n     * Register a custom hook\n     */\n    registerHook(name, hookClass) {\n        this.hooks.register(name, hookClass);\n    }\n\n    /**\n     * Register a preference\n     * @param {string} key - Unique preference key\n     * @param {*} defaultValue - Default value\n     * @param {Object} options - Configuration options\n     * @returns {Pref} Preference instance\n     */\n    registerPref(key, defaultValue, options = {}) {\n        return this.prefs.register(key, defaultValue, options);\n    }\n\n    /**\n     * Disconnect and cleanup\n     */\n    destroy() {\n        this.eventCapture.detach();\n        this.hooks.destroyAll();\n        this.prefs.destroy();\n        this.wsManager.close();\n    }\n}\n\n/**\n * Auto-initialize on DOM ready\n */\nfunction init() {\n    // Check if already initialized\n    if (window.__vango__) {\n        return;\n    }\n\n    // Read options from script tag data attributes\n    const script = document.currentScript || document.querySelector('script[data-vango]');\n    const options = {};\n\n    if (script) {\n        if (script.dataset.wsUrl) options.wsUrl = script.dataset.wsUrl;\n        if (script.dataset.debug) options.debug = script.dataset.debug === 'true';\n    }\n\n    // Create global instance\n    window.__vango__ = new VangoClient(options);\n}\n\n// Initialize when DOM is ready\nif (typeof document !== 'undefined') {\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', init);\n    } else {\n        init();\n    }\n}\n\n// Export for manual initialization and for the IIFE wrapper\nexport { EventType } from './codec.js';\nexport { ConnectionState, ConnectionManager } from './connection.js';\nexport default VangoClient;\n", "/**\n * Vango Client Utility Functions\n */\n\n/**\n * Convert HID string (\"h42\") to integer (42)\n * @param {string} hid - Hydration ID string\n * @returns {number} The numeric portion\n */\nexport function hidToInt(hid) {\n    return parseInt(hid.slice(1), 10);\n}\n\n/**\n * Convert integer to HID string\n * @param {number} n - Integer value\n * @returns {string} HID string like \"h42\"\n */\nexport function intToHid(n) {\n    return 'h' + n;\n}\n\n/**\n * Concatenate multiple Uint8Arrays into one\n * @param {Uint8Array[]} arrays - Arrays to concatenate\n * @returns {Uint8Array} Combined array\n */\nexport function concat(arrays) {\n    let totalLength = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        totalLength += arrays[i].length;\n    }\n\n    const result = new Uint8Array(totalLength);\n    let offset = 0;\n\n    for (let i = 0; i < arrays.length; i++) {\n        result.set(arrays[i], offset);\n        offset += arrays[i].length;\n    }\n\n    return result;\n}\n\n/**\n * Simple debounce function\n * @param {Function} fn - Function to debounce\n * @param {number} delay - Delay in milliseconds\n * @returns {Function} Debounced function\n */\nexport function debounce(fn, delay) {\n    let timer = null;\n    return function (...args) {\n        if (timer) clearTimeout(timer);\n        timer = setTimeout(() => {\n            timer = null;\n            fn.apply(this, args);\n        }, delay);\n    };\n}\n\n/**\n * Simple throttle function\n * @param {Function} fn - Function to throttle\n * @param {number} limit - Minimum time between calls\n * @returns {Function} Throttled function\n */\nexport function throttle(fn, limit) {\n    let inThrottle = false;\n    return function (...args) {\n        if (!inThrottle) {\n            fn.apply(this, args);\n            inThrottle = true;\n            setTimeout(() => {\n                inThrottle = false;\n            }, limit);\n        }\n    };\n}\n", "/**\n * Binary Codec for Vango Protocol\n *\n * Handles encoding/decoding of events and patches using the binary protocol\n * that matches the Go server implementation in pkg/protocol/.\n */\n\nimport { hidToInt, intToHid, concat } from './utils.js';\n\n/**\n * Event type constants - must match pkg/protocol/event.go\n */\nexport const EventType = {\n    // Mouse events (0x01-0x07)\n    CLICK: 0x01,\n    DBLCLICK: 0x02,\n    MOUSEDOWN: 0x03,\n    MOUSEUP: 0x04,\n    MOUSEMOVE: 0x05,\n    MOUSEENTER: 0x06,\n    MOUSELEAVE: 0x07,\n\n    // Form events (0x10-0x14)\n    INPUT: 0x10,\n    CHANGE: 0x11,\n    SUBMIT: 0x12,\n    FOCUS: 0x13,\n    BLUR: 0x14,\n\n    // Keyboard events (0x20-0x22)\n    KEYDOWN: 0x20,\n    KEYUP: 0x21,\n    KEYPRESS: 0x22,\n\n    // Scroll/Resize events (0x30-0x31)\n    SCROLL: 0x30,\n    RESIZE: 0x31,\n\n    // Touch events (0x40-0x42)\n    TOUCHSTART: 0x40,\n    TOUCHMOVE: 0x41,\n    TOUCHEND: 0x42,\n\n    // Drag events (0x50-0x52)\n    DRAGSTART: 0x50,\n    DRAGEND: 0x51,\n    DROP: 0x52,\n\n    // Special events (0x60+)\n    HOOK: 0x60,\n    NAVIGATE: 0x70,\n    CUSTOM: 0xFF,\n};\n\n/**\n * Patch type constants - must match pkg/protocol/patch.go\n */\nexport const PatchType = {\n    SET_TEXT: 0x01,\n    SET_ATTR: 0x02,\n    REMOVE_ATTR: 0x03,\n    INSERT_NODE: 0x04,\n    REMOVE_NODE: 0x05,\n    MOVE_NODE: 0x06,\n    REPLACE_NODE: 0x07,\n    SET_VALUE: 0x08,\n    SET_CHECKED: 0x09,\n    SET_SELECTED: 0x0A,\n    FOCUS: 0x0B,\n    BLUR: 0x0C,\n    SCROLL_TO: 0x0D,\n    ADD_CLASS: 0x10,\n    REMOVE_CLASS: 0x11,\n    TOGGLE_CLASS: 0x12,\n    SET_STYLE: 0x13,\n    REMOVE_STYLE: 0x14,\n    SET_DATA: 0x15,\n    DISPATCH: 0x20,\n    // NOTE: EVAL (0x21) has been REMOVED for security. Server never sends it.\n    // URL operations (Phase 12: URLParam 2.0)\n    URL_PUSH: 0x30,\n    URL_REPLACE: 0x31,\n    // Navigation operations (full route navigation)\n    NAV_PUSH: 0x32,\n    NAV_REPLACE: 0x33,\n};\n\n/**\n * Key modifier flags - must match pkg/protocol/event.go\n */\nexport const KeyMod = {\n    CTRL: 0x01,\n    SHIFT: 0x02,\n    ALT: 0x04,\n    META: 0x08,\n};\n\n/**\n * VNode type constants for wire format\n */\nconst VNodeType = {\n    ELEMENT: 0x01,\n    TEXT: 0x02,\n    FRAGMENT: 0x03,\n};\n\n/**\n * Hook value type constants\n */\nconst HookValueType = {\n    NULL: 0x00,\n    BOOL: 0x01,\n    INT: 0x02,\n    FLOAT: 0x03,\n    STRING: 0x04,\n    ARRAY: 0x05,\n    OBJECT: 0x06,\n};\n\n/**\n * Binary codec for Vango protocol\n */\nexport class BinaryCodec {\n    constructor() {\n        this.textEncoder = new TextEncoder();\n        this.textDecoder = new TextDecoder();\n    }\n\n    /**\n     * Encode event to binary buffer\n     * Format: [seq][type][hid][payload...]\n     */\n    encodeEvent(seq, type, hid, data = null) {\n        const parts = [];\n\n        // Sequence number\n        parts.push(this.encodeUvarint(seq));\n\n        // Event type\n        parts.push(new Uint8Array([type]));\n\n        // HID as string\n        parts.push(this.encodeString(hid));\n\n        // Payload (depends on event type)\n        switch (type) {\n            case EventType.INPUT:\n            case EventType.CHANGE:\n                // String value\n                parts.push(this.encodeString(data?.value || ''));\n                break;\n\n            case EventType.SUBMIT:\n                // Form fields map\n                this.encodeFormData(parts, data);\n                break;\n\n            case EventType.KEYDOWN:\n            case EventType.KEYUP:\n            case EventType.KEYPRESS:\n                this.encodeKeyboardEvent(parts, data);\n                break;\n\n            case EventType.MOUSEDOWN:\n            case EventType.MOUSEUP:\n            case EventType.MOUSEMOVE:\n                this.encodeMouseEvent(parts, data);\n                break;\n\n            case EventType.SCROLL:\n                this.encodeScrollEvent(parts, data);\n                break;\n\n            case EventType.RESIZE:\n                this.encodeResizeEvent(parts, data);\n                break;\n\n            case EventType.TOUCHSTART:\n            case EventType.TOUCHMOVE:\n            case EventType.TOUCHEND:\n                this.encodeTouchEvent(parts, data);\n                break;\n\n            case EventType.DRAGSTART:\n            case EventType.DRAGEND:\n            case EventType.DROP:\n                this.encodeDragEvent(parts, data);\n                break;\n\n            case EventType.HOOK:\n                this.encodeHookEvent(parts, data);\n                break;\n\n            case EventType.NAVIGATE:\n                parts.push(this.encodeString(data?.path || ''));\n                parts.push(new Uint8Array([data?.replace ? 1 : 0]));\n                break;\n\n            case EventType.CUSTOM:\n                parts.push(this.encodeString(data?.name || ''));\n                parts.push(this.encodeLenBytes(data?.data || new Uint8Array(0)));\n                break;\n\n            // No payload for simple events\n            case EventType.CLICK:\n            case EventType.DBLCLICK:\n            case EventType.FOCUS:\n            case EventType.BLUR:\n            case EventType.MOUSEENTER:\n            case EventType.MOUSELEAVE:\n            default:\n                // No additional data\n                break;\n        }\n\n        return concat(parts);\n    }\n\n    /**\n     * Decode patches from binary buffer\n     * Format: [seq][count][patch...]\n     */\n    decodePatches(buffer) {\n        let offset = 0;\n\n        // Read sequence number\n        const { value: seq, bytesRead: seqBytes } = this.decodeUvarint(buffer, offset);\n        offset += seqBytes;\n\n        // Read patch count\n        const { value: count, bytesRead: countBytes } = this.decodeUvarint(buffer, offset);\n        offset += countBytes;\n\n        const patches = [];\n        for (let i = 0; i < count; i++) {\n            const { patch, bytesRead } = this.decodePatch(buffer, offset);\n            patches.push(patch);\n            offset += bytesRead;\n        }\n\n        return { seq, patches };\n    }\n\n    /**\n     * Decode single patch\n     */\n    decodePatch(buffer, offset) {\n        const startOffset = offset;\n        const patch = {};\n\n        // Patch type\n        patch.type = buffer[offset++];\n\n        // Target HID\n        const { value: hid, bytesRead: hidBytes } = this.decodeString(buffer, offset);\n        patch.hid = hid;\n        offset += hidBytes;\n\n        // Payload (depends on patch type)\n        switch (patch.type) {\n            case PatchType.SET_TEXT:\n            case PatchType.SET_VALUE: {\n                const { value, bytesRead } = this.decodeString(buffer, offset);\n                patch.value = value;\n                offset += bytesRead;\n                break;\n            }\n\n            case PatchType.SET_ATTR:\n            case PatchType.SET_STYLE:\n            case PatchType.SET_DATA: {\n                const { value: key, bytesRead: keyBytes } = this.decodeString(buffer, offset);\n                offset += keyBytes;\n                const { value: val, bytesRead: valBytes } = this.decodeString(buffer, offset);\n                offset += valBytes;\n                patch.key = key;\n                patch.value = val;\n                break;\n            }\n\n            case PatchType.REMOVE_ATTR:\n            case PatchType.REMOVE_STYLE: {\n                const { value, bytesRead } = this.decodeString(buffer, offset);\n                patch.key = value;\n                offset += bytesRead;\n                break;\n            }\n\n            case PatchType.ADD_CLASS:\n            case PatchType.REMOVE_CLASS:\n            case PatchType.TOGGLE_CLASS: {\n                const { value, bytesRead } = this.decodeString(buffer, offset);\n                patch.className = value;\n                offset += bytesRead;\n                break;\n            }\n\n            case PatchType.INSERT_NODE: {\n                const { value: parentID, bytesRead: parentBytes } = this.decodeString(buffer, offset);\n                offset += parentBytes;\n                const { value: index, bytesRead: indexBytes } = this.decodeUvarint(buffer, offset);\n                offset += indexBytes;\n                const { vnode, bytesRead: vnodeBytes } = this.decodeVNode(buffer, offset);\n                offset += vnodeBytes;\n                patch.parentID = parentID;\n                patch.index = index;\n                patch.vnode = vnode;\n                break;\n            }\n\n            case PatchType.REMOVE_NODE:\n                // No additional data (HID is sufficient)\n                break;\n\n            case PatchType.MOVE_NODE: {\n                const { value: parentID, bytesRead: parentBytes } = this.decodeString(buffer, offset);\n                offset += parentBytes;\n                const { value: index, bytesRead: indexBytes } = this.decodeUvarint(buffer, offset);\n                offset += indexBytes;\n                patch.parentID = parentID;\n                patch.index = index;\n                break;\n            }\n\n            case PatchType.REPLACE_NODE: {\n                const { vnode, bytesRead: vnodeBytes } = this.decodeVNode(buffer, offset);\n                offset += vnodeBytes;\n                patch.vnode = vnode;\n                break;\n            }\n\n            case PatchType.SET_CHECKED:\n            case PatchType.SET_SELECTED: {\n                patch.value = buffer[offset++] === 1;\n                break;\n            }\n\n            case PatchType.FOCUS:\n            case PatchType.BLUR:\n                // No payload\n                break;\n\n            case PatchType.SCROLL_TO: {\n                const { value: x, bytesRead: xBytes } = this.decodeSvarint(buffer, offset);\n                offset += xBytes;\n                const { value: y, bytesRead: yBytes } = this.decodeSvarint(buffer, offset);\n                offset += yBytes;\n                patch.x = x;\n                patch.y = y;\n                patch.behavior = buffer[offset++]; // 0 = instant, 1 = smooth\n                break;\n            }\n\n            case PatchType.DISPATCH: {\n                const { value: eventName, bytesRead: nameBytes } = this.decodeString(buffer, offset);\n                offset += nameBytes;\n                const { value: detail, bytesRead: detailBytes } = this.decodeString(buffer, offset);\n                offset += detailBytes;\n                patch.eventName = eventName;\n                patch.detail = detail;\n                break;\n            }\n\n            // NOTE: PatchType.EVAL (0x21) is intentionally not handled.\n            // The server never sends it and we should not execute arbitrary code.\n\n            case PatchType.URL_PUSH:\n            case PatchType.URL_REPLACE: {\n                // Decode params: count + key/value pairs\n                const { value: count, bytesRead: countBytes } = this.decodeUvarint(buffer, offset);\n                offset += countBytes;\n                patch.params = {};\n                for (let i = 0; i < count; i++) {\n                    const { value: key, bytesRead: keyBytes } = this.decodeString(buffer, offset);\n                    offset += keyBytes;\n                    const { value: value, bytesRead: valueBytes } = this.decodeString(buffer, offset);\n                    offset += valueBytes;\n                    patch.params[key] = value;\n                }\n                patch.op = patch.type; // Store op for URLManager\n                break;\n            }\n\n            case PatchType.NAV_PUSH:\n            case PatchType.NAV_REPLACE: {\n                // Decode path (includes query string)\n                // Wire format: [0x32|0x33][hid:string][path:string]\n                const { value: path, bytesRead: pathBytes } = this.decodeString(buffer, offset);\n                offset += pathBytes;\n                patch.path = path;\n                break;\n            }\n\n            default:\n                // Unknown patch type - skip for forward compatibility\n                break;\n        }\n\n        return { patch, bytesRead: offset - startOffset };\n    }\n\n    /**\n     * Decode VNode from buffer\n     */\n    decodeVNode(buffer, offset) {\n        const startOffset = offset;\n        const vnode = {};\n\n        // Node type\n        const nodeType = buffer[offset++];\n\n        switch (nodeType) {\n            case VNodeType.ELEMENT: {\n                vnode.type = 'element';\n\n                // Tag name\n                const { value: tag, bytesRead: tagBytes } = this.decodeString(buffer, offset);\n                vnode.tag = tag;\n                offset += tagBytes;\n\n                // HID (empty string = no hid)\n                const { value: hid, bytesRead: hidBytes } = this.decodeString(buffer, offset);\n                vnode.hid = hid || null;\n                offset += hidBytes;\n\n                // Attributes count and key-value pairs\n                const { value: attrCount, bytesRead: attrCountBytes } = this.decodeUvarint(buffer, offset);\n                offset += attrCountBytes;\n                vnode.attrs = {};\n\n                for (let i = 0; i < attrCount; i++) {\n                    const { value: key, bytesRead: keyBytes } = this.decodeString(buffer, offset);\n                    offset += keyBytes;\n                    const { value: val, bytesRead: valBytes } = this.decodeString(buffer, offset);\n                    offset += valBytes;\n                    vnode.attrs[key] = val;\n                }\n\n                // Children count and nodes\n                const { value: childCount, bytesRead: childCountBytes } = this.decodeUvarint(buffer, offset);\n                offset += childCountBytes;\n                vnode.children = [];\n\n                for (let i = 0; i < childCount; i++) {\n                    const { vnode: child, bytesRead: childBytes } = this.decodeVNode(buffer, offset);\n                    vnode.children.push(child);\n                    offset += childBytes;\n                }\n                break;\n            }\n\n            case VNodeType.TEXT: {\n                vnode.type = 'text';\n                const { value: text, bytesRead: textBytes } = this.decodeString(buffer, offset);\n                vnode.text = text;\n                offset += textBytes;\n                break;\n            }\n\n            case VNodeType.FRAGMENT: {\n                vnode.type = 'fragment';\n                const { value: childCount, bytesRead: countBytes } = this.decodeUvarint(buffer, offset);\n                offset += countBytes;\n                vnode.children = [];\n\n                for (let i = 0; i < childCount; i++) {\n                    const { vnode: child, bytesRead: childBytes } = this.decodeVNode(buffer, offset);\n                    vnode.children.push(child);\n                    offset += childBytes;\n                }\n                break;\n            }\n\n            default:\n                vnode.type = 'unknown';\n        }\n\n        return { vnode, bytesRead: offset - startOffset };\n    }\n\n    /**\n     * Encode string with length prefix (varint length + UTF-8 bytes)\n     */\n    encodeString(str) {\n        const bytes = this.textEncoder.encode(str);\n        const length = this.encodeUvarint(bytes.length);\n        return concat([length, bytes]);\n    }\n\n    /**\n     * Decode string with length prefix\n     */\n    decodeString(buffer, offset) {\n        const { value: length, bytesRead: lengthBytes } = this.decodeUvarint(buffer, offset);\n        const strBytes = buffer.slice(offset + lengthBytes, offset + lengthBytes + length);\n        const value = this.textDecoder.decode(strBytes);\n        return { value, bytesRead: lengthBytes + length };\n    }\n\n    /**\n     * Encode unsigned varint (protobuf-style)\n     */\n    encodeUvarint(value) {\n        const bytes = [];\n        while (value > 0x7F) {\n            bytes.push((value & 0x7F) | 0x80);\n            value >>>= 7;\n        }\n        bytes.push(value & 0x7F);\n        return new Uint8Array(bytes);\n    }\n\n    /**\n     * Decode unsigned varint\n     */\n    decodeUvarint(buffer, offset) {\n        let value = 0;\n        let shift = 0;\n        let bytesRead = 0;\n\n        while (true) {\n            const byte = buffer[offset + bytesRead];\n            bytesRead++;\n            value |= (byte & 0x7F) << shift;\n\n            if ((byte & 0x80) === 0) {\n                break;\n            }\n            shift += 7;\n        }\n\n        return { value, bytesRead };\n    }\n\n    /**\n     * Encode signed varint using ZigZag encoding\n     */\n    encodeSvarint(value) {\n        // ZigZag encode: (n << 1) ^ (n >> 63)\n        const zigzag = (value << 1) ^ (value >> 31);\n        return this.encodeUvarint(zigzag >>> 0); // Convert to unsigned\n    }\n\n    /**\n     * Decode signed varint using ZigZag encoding\n     */\n    decodeSvarint(buffer, offset) {\n        const { value: zigzag, bytesRead } = this.decodeUvarint(buffer, offset);\n        // ZigZag decode: (n >>> 1) ^ -(n & 1)\n        const value = (zigzag >>> 1) ^ -(zigzag & 1);\n        return { value, bytesRead };\n    }\n\n    /**\n     * Encode length-prefixed bytes\n     */\n    encodeLenBytes(bytes) {\n        const length = this.encodeUvarint(bytes.length);\n        return concat([length, bytes]);\n    }\n\n    /**\n     * Decode length-prefixed bytes\n     */\n    decodeLenBytes(buffer, offset) {\n        const { value: length, bytesRead: lengthBytes } = this.decodeUvarint(buffer, offset);\n        const bytes = buffer.slice(offset + lengthBytes, offset + lengthBytes + length);\n        return { value: bytes, bytesRead: lengthBytes + length };\n    }\n\n    /**\n     * Encode form data map\n     */\n    encodeFormData(parts, formData) {\n        if (!formData) {\n            parts.push(this.encodeUvarint(0));\n            return;\n        }\n\n        const entries = [];\n        if (formData instanceof FormData) {\n            for (const [key, value] of formData.entries()) {\n                entries.push({ key, value: String(value) });\n            }\n        } else if (typeof formData === 'object') {\n            for (const [key, value] of Object.entries(formData)) {\n                entries.push({ key, value: String(value) });\n            }\n        }\n\n        parts.push(this.encodeUvarint(entries.length));\n        for (const { key, value } of entries) {\n            parts.push(this.encodeString(key));\n            parts.push(this.encodeString(value));\n        }\n    }\n\n    /**\n     * Encode keyboard event\n     * Per spec section 3.9.3, lines 1091-1103\n     */\n    encodeKeyboardEvent(parts, data) {\n        // Key value (e.g., \"Enter\", \"a\", \"Escape\")\n        parts.push(this.encodeString(data?.key || ''));\n\n        // Physical key code (e.g., \"Enter\", \"KeyA\", \"Escape\")\n        parts.push(this.encodeString(data?.code || ''));\n\n        // Modifier keys bitmask\n        let modifiers = 0;\n        if (data?.ctrlKey) modifiers |= KeyMod.CTRL;\n        if (data?.shiftKey) modifiers |= KeyMod.SHIFT;\n        if (data?.altKey) modifiers |= KeyMod.ALT;\n        if (data?.metaKey) modifiers |= KeyMod.META;\n        parts.push(new Uint8Array([modifiers]));\n\n        // Repeat flag (true if key is being held down)\n        parts.push(new Uint8Array([data?.repeat ? 1 : 0]));\n\n        // Key location: 0=standard, 1=left, 2=right, 3=numpad\n        parts.push(new Uint8Array([data?.location || 0]));\n    }\n\n    /**\n     * Encode mouse event\n     * Per spec section 3.9.3, lines 1059-1075\n     */\n    encodeMouseEvent(parts, data) {\n        // Position relative to viewport\n        parts.push(this.encodeSvarint(data?.clientX || 0));\n        parts.push(this.encodeSvarint(data?.clientY || 0));\n\n        // Position relative to document\n        parts.push(this.encodeSvarint(data?.pageX || 0));\n        parts.push(this.encodeSvarint(data?.pageY || 0));\n\n        // Position relative to target element\n        parts.push(this.encodeSvarint(data?.offsetX || 0));\n        parts.push(this.encodeSvarint(data?.offsetY || 0));\n\n        // Button that triggered the event (0=left, 1=middle, 2=right)\n        parts.push(new Uint8Array([data?.button || 0]));\n\n        // Bitmask of currently pressed buttons\n        parts.push(new Uint8Array([data?.buttons || 0]));\n\n        // Modifier keys\n        let modifiers = 0;\n        if (data?.ctrlKey) modifiers |= KeyMod.CTRL;\n        if (data?.shiftKey) modifiers |= KeyMod.SHIFT;\n        if (data?.altKey) modifiers |= KeyMod.ALT;\n        if (data?.metaKey) modifiers |= KeyMod.META;\n        parts.push(new Uint8Array([modifiers]));\n    }\n\n    /**\n     * Encode scroll event\n     */\n    encodeScrollEvent(parts, data) {\n        parts.push(this.encodeSvarint(data?.scrollTop || 0));\n        parts.push(this.encodeSvarint(data?.scrollLeft || 0));\n    }\n\n    /**\n     * Encode resize event\n     */\n    encodeResizeEvent(parts, data) {\n        parts.push(this.encodeSvarint(data?.width || 0));\n        parts.push(this.encodeSvarint(data?.height || 0));\n    }\n\n    /**\n     * Encode touch event\n     * Per spec section 3.9.3, lines 1212-1225\n     */\n    encodeTouchEvent(parts, data) {\n        // All current touches on the screen\n        const touches = data?.touches || [];\n        parts.push(this.encodeUvarint(touches.length));\n        for (const touch of touches) {\n            parts.push(this.encodeSvarint(touch.identifier || touch.id || 0));\n            parts.push(this.encodeSvarint(touch.clientX || 0));\n            parts.push(this.encodeSvarint(touch.clientY || 0));\n            parts.push(this.encodeSvarint(touch.pageX || 0));\n            parts.push(this.encodeSvarint(touch.pageY || 0));\n        }\n\n        // Touches that started on this element\n        const targetTouches = data?.targetTouches || [];\n        parts.push(this.encodeUvarint(targetTouches.length));\n        for (const touch of targetTouches) {\n            parts.push(this.encodeSvarint(touch.identifier || touch.id || 0));\n            parts.push(this.encodeSvarint(touch.clientX || 0));\n            parts.push(this.encodeSvarint(touch.clientY || 0));\n            parts.push(this.encodeSvarint(touch.pageX || 0));\n            parts.push(this.encodeSvarint(touch.pageY || 0));\n        }\n\n        // Touches that changed in this event\n        const changedTouches = data?.changedTouches || [];\n        parts.push(this.encodeUvarint(changedTouches.length));\n        for (const touch of changedTouches) {\n            parts.push(this.encodeSvarint(touch.identifier || touch.id || 0));\n            parts.push(this.encodeSvarint(touch.clientX || 0));\n            parts.push(this.encodeSvarint(touch.clientY || 0));\n            parts.push(this.encodeSvarint(touch.pageX || 0));\n            parts.push(this.encodeSvarint(touch.pageY || 0));\n        }\n    }\n\n    /**\n     * Encode drag event\n     */\n    encodeDragEvent(parts, data) {\n        parts.push(this.encodeSvarint(data?.clientX || 0));\n        parts.push(this.encodeSvarint(data?.clientY || 0));\n\n        let modifiers = 0;\n        if (data?.ctrlKey) modifiers |= KeyMod.CTRL;\n        if (data?.shiftKey) modifiers |= KeyMod.SHIFT;\n        if (data?.altKey) modifiers |= KeyMod.ALT;\n        if (data?.metaKey) modifiers |= KeyMod.META;\n        parts.push(new Uint8Array([modifiers]));\n    }\n\n    /**\n     * Encode hook event\n     */\n    encodeHookEvent(parts, data) {\n        parts.push(this.encodeString(data?.name || ''));\n        this.encodeHookData(parts, data?.data || {});\n    }\n\n    /**\n     * Encode hook data map\n     */\n    encodeHookData(parts, data) {\n        const entries = Object.entries(data);\n        parts.push(this.encodeUvarint(entries.length));\n        for (const [key, value] of entries) {\n            parts.push(this.encodeString(key));\n            this.encodeHookValue(parts, value);\n        }\n    }\n\n    /**\n     * Encode single hook value\n     */\n    encodeHookValue(parts, value) {\n        if (value === null || value === undefined) {\n            parts.push(new Uint8Array([HookValueType.NULL]));\n        } else if (typeof value === 'boolean') {\n            parts.push(new Uint8Array([HookValueType.BOOL, value ? 1 : 0]));\n        } else if (typeof value === 'number' && Number.isInteger(value)) {\n            parts.push(new Uint8Array([HookValueType.INT]));\n            parts.push(this.encodeSvarint(value));\n        } else if (typeof value === 'number') {\n            parts.push(new Uint8Array([HookValueType.FLOAT]));\n            parts.push(this.encodeFloat64(value));\n        } else if (typeof value === 'string') {\n            parts.push(new Uint8Array([HookValueType.STRING]));\n            parts.push(this.encodeString(value));\n        } else if (Array.isArray(value)) {\n            parts.push(new Uint8Array([HookValueType.ARRAY]));\n            parts.push(this.encodeUvarint(value.length));\n            for (const item of value) {\n                this.encodeHookValue(parts, item);\n            }\n        } else if (typeof value === 'object') {\n            parts.push(new Uint8Array([HookValueType.OBJECT]));\n            const entries = Object.entries(value);\n            parts.push(this.encodeUvarint(entries.length));\n            for (const [k, v] of entries) {\n                parts.push(this.encodeString(k));\n                this.encodeHookValue(parts, v);\n            }\n        } else {\n            // Unknown type, encode as null\n            parts.push(new Uint8Array([HookValueType.NULL]));\n        }\n    }\n\n    /**\n     * Encode 64-bit float (little-endian)\n     */\n    encodeFloat64(value) {\n        const buffer = new ArrayBuffer(8);\n        new DataView(buffer).setFloat64(0, value, true);\n        return new Uint8Array(buffer);\n    }\n\n    /**\n     * Encode ClientHello for handshake (raw payload, no frame header)\n     * Format: [major:1][minor:1][csrf:string][sessionID:string][lastSeq:4][viewportW:2][viewportH:2][tzOffset:2]\n     */\n    encodeClientHello(options = {}) {\n        const parts = [];\n\n        // Protocol version (2.0)\n        parts.push(new Uint8Array([0x02, 0x00]));\n\n        // CSRF token\n        parts.push(this.encodeString(options.csrf || ''));\n\n        // Session ID (empty for new session)\n        parts.push(this.encodeString(options.sessionId || ''));\n\n        // Last sequence number (uint32 little-endian)\n        parts.push(this.encodeUint32(options.lastSeq || 0));\n\n        // Viewport dimensions (uint16 little-endian)\n        parts.push(this.encodeUint16(options.viewportW || window.innerWidth));\n        parts.push(this.encodeUint16(options.viewportH || window.innerHeight));\n\n        // Timezone offset in minutes (int16 little-endian)\n        const tzOffset = new Date().getTimezoneOffset();\n        parts.push(this.encodeInt16(-tzOffset)); // Negate because JS gives opposite sign\n\n        return concat(parts);\n    }\n\n    /**\n     * Encode ClientHello wrapped in frame header for consistent framing.\n     * Format: [type:1][flags:1][len:2][payload...]\n     *\n     * Per spec: All protocol messages should use the same frame format.\n     */\n    encodeClientHelloFrame(options = {}) {\n        const payload = this.encodeClientHello(options);\n        const frame = new Uint8Array(4 + payload.length);\n        frame[0] = 0x00; // FrameHandshake\n        frame[1] = 0x00; // No flags\n        frame[2] = (payload.length >> 8) & 0xFF; // Length high byte (big-endian)\n        frame[3] = payload.length & 0xFF; // Length low byte\n        frame.set(payload, 4);\n        return frame;\n    }\n\n    /**\n     * Decode ServerHello from handshake response\n     * Frame format: [type:1][flags:1][len:2][payload...]\n     * ServerHello payload: [status:1][sessionID:string][nextSeq:4][serverTime:8][flags:2]\n     */\n    decodeServerHello(buffer) {\n        // Need at least 4-byte header + 1-byte status\n        if (buffer.length < 5) {\n            return { error: 'Buffer too short' };\n        }\n\n        // Frame header: [type:1][flags:1][len:2]\n        const frameType = buffer[0];\n        if (frameType !== 0x00) {\n            return { error: `Unexpected frame type: ${frameType}` };\n        }\n        // Skip flags (buffer[1]) and length (buffer[2-3])\n\n        // Start at payload (offset 4)\n        let offset = 4;\n\n        // Status byte\n        const status = buffer[offset++];\n\n        // Session ID\n        const { value: sessionId, bytesRead: sessionBytes } = this.decodeString(buffer, offset);\n        offset += sessionBytes;\n\n        // Next sequence (uint32 little-endian)\n        const nextSeq = this.decodeUint32(buffer, offset);\n        offset += 4;\n\n        // Server time (uint64 little-endian)\n        const serverTime = this.decodeUint64(buffer, offset);\n        offset += 8;\n\n        // Flags (uint16 little-endian)\n        const flags = this.decodeUint16(buffer, offset);\n\n        return {\n            status,\n            sessionId,\n            nextSeq,\n            serverTime,\n            flags,\n            ok: status === 0,\n        };\n    }\n\n    /**\n     * Encode uint16 big-endian (matches Go protocol)\n     */\n    encodeUint16(value) {\n        return new Uint8Array([(value >> 8) & 0xFF, value & 0xFF]);\n    }\n\n    /**\n     * Decode uint16 big-endian (matches Go protocol)\n     */\n    decodeUint16(buffer, offset) {\n        return (buffer[offset] << 8) | buffer[offset + 1];\n    }\n\n    /**\n     * Encode int16 big-endian (matches Go protocol)\n     */\n    encodeInt16(value) {\n        return this.encodeUint16(value & 0xFFFF);\n    }\n\n    /**\n     * Encode uint32 big-endian (matches Go protocol)\n     */\n    encodeUint32(value) {\n        return new Uint8Array([\n            (value >> 24) & 0xFF,\n            (value >> 16) & 0xFF,\n            (value >> 8) & 0xFF,\n            value & 0xFF,\n        ]);\n    }\n\n    /**\n     * Decode uint32 big-endian (matches Go protocol)\n     */\n    decodeUint32(buffer, offset) {\n        return (buffer[offset] << 24) |\n            (buffer[offset + 1] << 16) |\n            (buffer[offset + 2] << 8) |\n            buffer[offset + 3];\n    }\n\n    /**\n     * Decode uint64 big-endian (returns as Number, may lose precision for large values)\n     * Matches Go protocol encoding.\n     */\n    decodeUint64(buffer, offset) {\n        const high = this.decodeUint32(buffer, offset);\n        const low = this.decodeUint32(buffer, offset + 4);\n        return high * 0x100000000 + low;\n    }\n\n    /**\n     * Encode ACK payload\n     * Format: [lastSeq:varint][window:varint]\n     * Matches vango/pkg/protocol/ack.go\n     */\n    encodeAck(lastSeq, window = 100) {\n        return concat([\n            this.encodeUvarint(lastSeq),\n            this.encodeUvarint(window)\n        ]);\n    }\n\n    /**\n     * Encode ResyncRequest control payload\n     * Format: [controlType:1][lastSeq:varint]\n     * Matches vango/pkg/protocol/control.go ControlResyncRequest (0x10)\n     */\n    encodeResyncRequest(lastSeq) {\n        return concat([\n            new Uint8Array([0x10]), // ControlResyncRequest\n            this.encodeUvarint(lastSeq)\n        ]);\n    }\n}\n", "/**\n * WebSocket Connection Manager\n *\n * Handles WebSocket connection lifecycle, reconnection, and message routing.\n */\n\nexport class WebSocketManager {\n    constructor(client, options = {}) {\n        this.client = client;\n        this.options = {\n            reconnect: options.reconnect !== false,\n            reconnectInterval: options.reconnectInterval || 1000,\n            reconnectMaxInterval: options.reconnectMaxInterval || 30000,\n            heartbeatInterval: options.heartbeatInterval || 30000,\n            ...options,\n        };\n\n        this.ws = null;\n        this.connected = false;\n        this.handshakeComplete = false;\n        this.sessionId = null;\n        this.reconnectAttempts = 0;\n        this.heartbeatTimer = null;\n        this.messageQueue = [];\n    }\n\n    /**\n     * Connect to WebSocket server\n     */\n    connect(url) {\n        if (this.ws) {\n            this.ws.close();\n        }\n\n        this.url = url;\n        this.ws = new WebSocket(url);\n        this.ws.binaryType = 'arraybuffer';\n\n        this.ws.onopen = () => this._onOpen();\n        this.ws.onclose = (e) => this._onClose(e);\n        this.ws.onerror = (e) => this._onError(e);\n        this.ws.onmessage = (e) => this._onMessage(e);\n    }\n\n    /**\n     * Handle WebSocket open\n     */\n    _onOpen() {\n        if (this.client.options.debug) {\n            console.log('[Vango] WebSocket connected');\n        }\n\n        this.reconnectAttempts = 0;\n\n        // Send handshake\n        this._sendHandshake();\n\n        // Start heartbeat\n        this._startHeartbeat();\n    }\n\n    /**\n     * Send binary ClientHello handshake wrapped in frame header.\n     * Per spec: All protocol messages use consistent framing.\n     */\n    _sendHandshake() {\n        const helloFrame = this.client.codec.encodeClientHelloFrame({\n            csrf: this._getCSRFToken(),\n            sessionId: this.sessionId || '',\n            viewportW: window.innerWidth,\n            viewportH: window.innerHeight,\n        });\n\n        this.ws.send(helloFrame);\n\n        if (this.client.options.debug) {\n            console.log('[Vango] Sent framed ClientHello');\n        }\n    }\n\n    /**\n     * Get CSRF token from window global or cookie (Double Submit Cookie pattern)\n     */\n    _getCSRFToken() {\n        // First try the embedded global (set by SSR)\n        if (window.__VANGO_CSRF__) {\n            return window.__VANGO_CSRF__;\n        }\n        // Fallback: read from cookie (Double Submit Cookie)\n        const match = document.cookie.match(/(?:^|;\\s*)__vango_csrf=([^;]*)/);\n        return match ? decodeURIComponent(match[1]) : '';\n    }\n\n    /**\n     * Handle incoming message\n     */\n    _onMessage(event) {\n        // All messages are binary\n        if (!(event.data instanceof ArrayBuffer)) {\n            if (this.client.options.debug) {\n                console.warn('[Vango] Received non-binary message:', event.data);\n            }\n            return;\n        }\n\n        const buffer = new Uint8Array(event.data);\n\n        // First message after connection is ServerHello\n        if (!this.handshakeComplete) {\n            const hello = this.client.codec.decodeServerHello(buffer);\n\n            if (hello.error) {\n                if (this.client.options.debug) {\n                    console.error('[Vango] Handshake error:', hello.error);\n                }\n                this.client._onError(new Error(hello.error));\n                return;\n            }\n\n            if (!hello.ok) {\n                const errorMessages = {\n                    0x01: 'Version mismatch',\n                    0x02: 'Invalid CSRF token',\n                    0x03: 'Session expired',\n                    0x04: 'Server busy',\n                    0x05: 'Upgrade required',\n                    0x06: 'Invalid format',\n                    0x07: 'Not authorized',\n                    0x08: 'Internal error',\n                };\n                const msg = errorMessages[hello.status] || `Handshake failed: ${hello.status}`;\n                this.client._onError(new Error(msg));\n                this.ws.close();\n                return;\n            }\n\n            this.handshakeComplete = true;\n            this.connected = true;\n            this.sessionId = hello.sessionId;\n            this.client._onConnected();\n\n            // Send queued messages\n            this._flushQueue();\n\n            if (this.client.options.debug) {\n                console.log('[Vango] Handshake complete, session:', this.sessionId);\n            }\n            return;\n        }\n\n        // All other messages handled by client\n        this.client._handleBinaryMessage(buffer);\n    }\n\n    /**\n     * Handle WebSocket close\n     *\n     * Per spec Section 9.6.3 (Connection Loss During Navigation):\n     * If WebSocket closes while awaiting navigation response,\n     * complete the navigation via location.assign(pendingPath).\n     */\n    _onClose(event) {\n        const wasConnected = this.connected;\n        this.connected = false;\n        this.handshakeComplete = false;\n        this._stopHeartbeat();\n\n        if (this.client.options.debug) {\n            console.log('[Vango] WebSocket closed:', event.code, event.reason);\n        }\n\n        // Per spec 9.6.3: If navigation was in progress, complete it via hard nav\n        // NOTE: Correct reference is eventCapture, not events\n        const pendingPath = this.client.eventCapture?.pendingNavPath;\n        if (wasConnected && pendingPath) {\n            console.log('[Vango] Connection lost during navigation, completing via location.assign:', pendingPath);\n            location.assign(pendingPath);\n            return; // Don't reconnect, we're navigating away\n        }\n\n        if (wasConnected) {\n            this.client._onDisconnected();\n        }\n\n        // Reconnect if enabled and not a clean close\n        if (this.options.reconnect && !event.wasClean) {\n            this._scheduleReconnect();\n        }\n    }\n\n    /**\n     * Handle WebSocket error\n     */\n    _onError(event) {\n        if (this.client.options.debug) {\n            console.error('[Vango] WebSocket error:', event);\n        }\n        this.client._onError(new Error('WebSocket error'));\n    }\n\n    /**\n     * Schedule reconnection with exponential backoff\n     */\n    _scheduleReconnect() {\n        const delay = Math.min(\n            this.options.reconnectInterval * Math.pow(2, this.reconnectAttempts),\n            this.options.reconnectMaxInterval\n        );\n\n        this.reconnectAttempts++;\n\n        if (this.client.options.debug) {\n            console.log(`[Vango] Reconnecting in ${delay}ms (attempt ${this.reconnectAttempts})`);\n        }\n\n        setTimeout(() => this.connect(this.url), delay);\n    }\n\n    /**\n     * Start heartbeat timer\n     */\n    _startHeartbeat() {\n        this.heartbeatTimer = setInterval(() => {\n            if (this.connected) {\n                this._sendPing();\n            }\n        }, this.options.heartbeatInterval);\n    }\n\n    /**\n     * Stop heartbeat timer\n     */\n    _stopHeartbeat() {\n        if (this.heartbeatTimer) {\n            clearInterval(this.heartbeatTimer);\n            this.heartbeatTimer = null;\n        }\n    }\n\n    /**\n     * Send ping (control message)\n     */\n    _sendPing() {\n        if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n            // Control payload: [control_type:1][timestamp:8]\n            // Timestamp as uint64 little-endian\n            const timestamp = Date.now();\n            const payload = new Uint8Array(9);\n            payload[0] = 0x01; // ControlPing\n            // Write timestamp as uint64 little-endian\n            let ts = timestamp;\n            for (let i = 0; i < 8; i++) {\n                payload[1 + i] = ts & 0xFF;\n                ts = Math.floor(ts / 256);\n            }\n\n            // Wrap in frame: [type:1][flags:1][length:2 big-endian][payload]\n            const frame = new Uint8Array(4 + payload.length);\n            frame[0] = 0x03; // FrameControl\n            frame[1] = 0x00; // flags\n            frame[2] = (payload.length >> 8) & 0xFF;\n            frame[3] = payload.length & 0xFF;\n            frame.set(payload, 4);\n\n            this.ws.send(frame);\n        }\n    }\n\n    /**\n     * Send binary message\n     */\n    send(buffer) {\n        if (this.connected && this.ws && this.ws.readyState === WebSocket.OPEN) {\n            this.ws.send(buffer);\n            return true;\n        } else {\n            // Queue for later\n            this.messageQueue.push(buffer);\n            return false;\n        }\n    }\n\n    /**\n     * Flush queued messages\n     */\n    _flushQueue() {\n        while (this.messageQueue.length > 0 && this.connected) {\n            const buffer = this.messageQueue.shift();\n            this.ws.send(buffer);\n        }\n    }\n\n    /**\n     * Close connection\n     */\n    close() {\n        this.options.reconnect = false;\n        this._stopHeartbeat();\n\n        if (this.ws) {\n            this.ws.close(1000, 'Client closing');\n            this.ws = null;\n        }\n    }\n}\n", "/**\n * Event Capture and Delegation\n *\n * Captures user events on elements with data-hid attributes and sends them\n * to the server via WebSocket.\n */\n\nimport { EventType } from './codec.js';\n\nexport class EventCapture {\n    constructor(client) {\n        this.client = client;\n        this.handlers = new Map();\n        this.debounceTimers = new Map();\n        this.scrollThrottled = new Set();\n        this.prefetchedPaths = new Set(); // Track prefetched paths to avoid duplicates\n    }\n\n    /**\n     * Attach event listeners to document\n     */\n    attach() {\n        // Click events\n        this._on('click', this._handleClick.bind(this));\n        this._on('dblclick', this._handleDblClick.bind(this));\n\n        // Input events (debounced)\n        this._on('input', this._handleInput.bind(this));\n        this._on('change', this._handleChange.bind(this));\n\n        // Form events\n        this._on('submit', this._handleSubmit.bind(this));\n\n        // Focus events (capture phase for delegation)\n        this._on('focus', this._handleFocus.bind(this), true);\n        this._on('blur', this._handleBlur.bind(this), true);\n\n        // Keyboard events\n        this._on('keydown', this._handleKeyDown.bind(this));\n        this._on('keyup', this._handleKeyUp.bind(this));\n\n        // Mouse events\n        this._on('mouseenter', this._handleMouseEnter.bind(this), true);\n        this._on('mouseleave', this._handleMouseLeave.bind(this), true);\n\n        // Scroll events (throttled)\n        this._on('scroll', this._handleScroll.bind(this), true);\n\n        // Navigation\n        this._on('click', this._handleLinkClick.bind(this));\n        window.addEventListener('popstate', this._handlePopState.bind(this));\n\n        // Prefetch on hover for links with data-prefetch attribute\n        this._on('mouseenter', this._handlePrefetch.bind(this), true);\n    }\n\n    /**\n     * Detach all event listeners\n     */\n    detach() {\n        for (const [key, { handler, capture }] of this.handlers) {\n            document.removeEventListener(key, handler, capture);\n        }\n        this.handlers.clear();\n\n        for (const timer of this.debounceTimers.values()) {\n            clearTimeout(timer);\n        }\n        this.debounceTimers.clear();\n    }\n\n    /**\n     * Helper to add event listener\n     */\n    _on(eventType, handler, capture = false) {\n        document.addEventListener(eventType, handler, { capture, passive: false });\n        this.handlers.set(`${eventType}-${capture}`, { handler, capture });\n    }\n\n    /**\n     * Find closest element with data-hid\n     */\n    _findHidElement(target) {\n        // Handle non-element targets (document, text nodes, etc.)\n        if (!target || !target.closest) {\n            return null;\n        }\n        return target.closest('[data-hid]');\n    }\n\n    _closest(target, selector) {\n        if (!target || typeof target.closest !== 'function') {\n            return null;\n        }\n        return target.closest(selector);\n    }\n\n    /**\n     * Check if element has an event in its data-ve attribute.\n     * Parses data-ve=\"click,input,change\" format per spec Section 5.2.\n     */\n    _hasEvent(el, eventName) {\n        const ve = (el.dataset.ve || '').split(',').map(s => s.trim());\n        return ve.includes(eventName);\n    }\n\n    /**\n     * Get modifier options for an event on an element.\n     * Reads data-pd-{event}, data-sp-{event}, data-self-{event}, etc.\n     * Per spec section 3.9.3, lines 1299-1365.\n     */\n    _getModifiers(el, eventName) {\n        return {\n            preventDefault: el.dataset[`pd${this._capitalize(eventName)}`] === 'true',\n            stopPropagation: el.dataset[`sp${this._capitalize(eventName)}`] === 'true',\n            self: el.dataset[`self${this._capitalize(eventName)}`] === 'true',\n            once: el.dataset[`once${this._capitalize(eventName)}`] === 'true',\n            passive: el.dataset[`passive${this._capitalize(eventName)}`] === 'true',\n            capture: el.dataset[`capture${this._capitalize(eventName)}`] === 'true',\n            debounce: parseInt(el.dataset[`debounce${this._capitalize(eventName)}`] || el.dataset.debounce || '0', 10),\n            throttle: parseInt(el.dataset[`throttle${this._capitalize(eventName)}`] || el.dataset.throttle || '0', 10),\n        };\n    }\n\n    /**\n     * Capitalize first letter for dataset property access (click -> Click)\n     */\n    _capitalize(str) {\n        return str.charAt(0).toUpperCase() + str.slice(1);\n    }\n\n    /**\n     * Apply modifiers to an event.\n     * Returns false if the event should not be processed.\n     * Returns the modifiers object for additional checks by handlers.\n     */\n    _applyModifiers(event, el, eventName) {\n        const mods = this._getModifiers(el, eventName);\n\n        // Self modifier - only fire if target is the exact element\n        if (mods.self && event.target !== el) {\n            return false;\n        }\n\n        // Passive modifier - per spec section 3.9.3 lines 1329-1332:\n        // \"Passive handlers cannot call preventDefault\"\n        // We enforce this by NOT calling preventDefault when passive is set,\n        // even if the handler or other modifiers would normally call it.\n        // Note: With event delegation, we cannot truly register as passive at the\n        // browser level per-element, but we enforce the semantic constraint.\n        if (mods.passive) {\n            // Store original preventDefault to block it\n            const originalPreventDefault = event.preventDefault.bind(event);\n            event.preventDefault = () => {\n                console.warn('[Vango] preventDefault() called on passive handler - ignored');\n            };\n            // Restore after microtask to not affect other handlers\n            queueMicrotask(() => {\n                event.preventDefault = originalPreventDefault;\n            });\n        } else if (mods.preventDefault) {\n            // PreventDefault modifier - only if not passive\n            event.preventDefault();\n        }\n\n        // StopPropagation modifier\n        if (mods.stopPropagation) {\n            event.stopPropagation();\n        }\n\n        // Once modifier - remove event from data-ve after first trigger\n        if (mods.once) {\n            const ve = (el.dataset.ve || '').split(',').map(s => s.trim());\n            const filtered = ve.filter(e => e !== eventName);\n            if (filtered.length > 0) {\n                el.dataset.ve = filtered.join(',');\n            } else {\n                delete el.dataset.ve;\n            }\n        }\n\n        // Capture modifier note: With event delegation at the document level,\n        // true per-element capture phase handling is not possible. The capture\n        // flag is available for documentation/future use, but currently some\n        // events (focus, blur, scroll, mouseenter, mouseleave) are always\n        // captured, while others (click, input, keydown) bubble.\n\n        return true;\n    }\n\n    /**\n     * Get debounce delay for an event on an element.\n     */\n    _getDebounce(el, eventName) {\n        const mods = this._getModifiers(el, eventName);\n        // Fall back to default for input events\n        if (eventName === 'input' && mods.debounce === 0) {\n            return 100;\n        }\n        return mods.debounce;\n    }\n\n    /**\n     * Get throttle delay for an event on an element.\n     */\n    _getThrottle(el, eventName) {\n        const mods = this._getModifiers(el, eventName);\n        // Fall back to default for scroll events\n        if (eventName === 'scroll' && mods.throttle === 0) {\n            return 100;\n        }\n        return mods.throttle;\n    }\n\n    /**\n     * Find closest element with data-hid that has a specific event in data-ve.\n     * Parses data-ve=\"click,input,change\" format per spec Section 5.2.\n     * This handles event bubbling through nested HID elements.\n     */\n    _findHidElementWithEvent(target, eventName) {\n        // Handle non-element targets\n        if (!target || !target.closest) {\n            return null;\n        }\n\n        // Start from the target and traverse up\n        let el = target.closest('[data-hid]');\n        while (el) {\n            if (this._hasEvent(el, eventName)) {\n                return el;\n            }\n            // Move to parent and find next HID element\n            const parent = el.parentElement;\n            if (!parent) break;\n            el = parent.closest('[data-hid]');\n        }\n        return null;\n    }\n\n    /**\n     * Handle click event\n     *\n     * Per spec Section 5.2 (Interception Decision Table):\n     * - MUST NOT intercept if defaultPrevented\n     * - MUST NOT intercept right/middle click (button !== 0)\n     * - MUST NOT intercept if modifier keys held\n     * - MUST NOT intercept if WebSocket not connected\n     * - For anchors: respect target, download, cross-origin\n     */\n    _handleClick(event) {\n        // Per spec 5.2: Check decision table before intercepting\n        if (event.defaultPrevented) return;\n        if (event.button !== 0) return;\n        if (event.ctrlKey || event.metaKey || event.shiftKey || event.altKey) return;\n        if (!this.client.connected) return;\n\n        // Find the closest HID element with a click event in data-ve, bubbling up through ancestors\n        const el = this._findHidElementWithEvent(event.target, 'click');\n        if (!el) return;\n\n        // For anchor elements, check closest anchor (el might be child of anchor)\n        // Important: Use event.target.closest, not el, to catch clicks inside anchors\n        const anchor = this._closest(event.target, 'a[href]');\n        if (anchor) {\n            const target = anchor.getAttribute('target');\n            if (target && target !== '_self') return;\n            if (anchor.hasAttribute('download')) return;\n            const href = anchor.getAttribute('href');\n            if (href) {\n                try {\n                    const url = new URL(href, location.href);\n                    if (url.origin !== location.origin) return;\n                } catch {\n                    return; // Invalid URL, let browser handle\n                }\n            }\n        }\n\n        // Apply modifiers (may skip if Self modifier fails)\n        if (!this._applyModifiers(event, el, 'click')) {\n            return;\n        }\n\n        // Only preventDefault when we're actually intercepting\n        event.preventDefault();\n\n        // Apply optimistic updates if configured\n        this.client.optimistic.applyOptimistic(el, 'click');\n\n        // Send event\n        this.client.sendEvent(EventType.CLICK, el.dataset.hid);\n    }\n\n    /**\n     * Handle double-click event\n     */\n    _handleDblClick(event) {\n        const el = this._findHidElement(event.target);\n        if (!el || !this._hasEvent(el, 'dblclick')) return;\n\n        // Apply modifiers (may skip if Self modifier fails)\n        if (!this._applyModifiers(event, el, 'dblclick')) {\n            return;\n        }\n\n        // Default preventDefault for dblclick events (unless passive)\n        const mods = this._getModifiers(el, 'dblclick');\n        if (!mods.preventDefault && !mods.passive) {\n            event.preventDefault();\n        }\n\n        this.client.sendEvent(EventType.DBLCLICK, el.dataset.hid);\n    }\n\n    /**\n     * Handle input event (debounced)\n     */\n    _handleInput(event) {\n        const el = this._findHidElement(event.target);\n        if (!el || !this._hasEvent(el, 'input')) return;\n\n        // Apply modifiers (may skip if Self modifier fails)\n        if (!this._applyModifiers(event, el, 'input')) {\n            return;\n        }\n\n        const hid = el.dataset.hid;\n        const debounceMs = this._getDebounce(el, 'input');\n\n        // Clear existing timer\n        if (this.debounceTimers.has(hid)) {\n            clearTimeout(this.debounceTimers.get(hid));\n        }\n\n        // If debounce is 0, send immediately\n        if (debounceMs === 0) {\n            this.client.sendEvent(EventType.INPUT, hid, { value: el.value });\n            return;\n        }\n\n        // Set new timer\n        const timer = setTimeout(() => {\n            this.debounceTimers.delete(hid);\n            this.client.sendEvent(EventType.INPUT, hid, { value: el.value });\n        }, debounceMs);\n\n        this.debounceTimers.set(hid, timer);\n    }\n\n    /**\n     * Handle change event\n     */\n    _handleChange(event) {\n        const el = this._findHidElement(event.target);\n        if (!el || !this._hasEvent(el, 'change')) return;\n\n        // Apply modifiers (may skip if Self modifier fails)\n        if (!this._applyModifiers(event, el, 'change')) {\n            return;\n        }\n\n        let value;\n        if (el.type === 'checkbox') {\n            value = el.checked ? 'true' : 'false';\n        } else if (el.type === 'radio') {\n            value = el.checked ? el.value : '';\n        } else if (el.tagName === 'SELECT' && el.multiple) {\n            value = Array.from(el.selectedOptions).map(o => o.value).join(',');\n        } else {\n            value = el.value;\n        }\n\n        // Apply optimistic updates\n        this.client.optimistic.applyOptimistic(el, 'change');\n\n        this.client.sendEvent(EventType.CHANGE, el.dataset.hid, { value });\n    }\n\n    /**\n     * Handle form submit\n     *\n     * Per spec Section 5.2 (Progressive Enhancement):\n     * When WebSocket is unavailable, forms MUST fall back to normal HTTP submission.\n     */\n    _handleSubmit(event) {\n        const form = this._closest(event.target, 'form[data-hid]');\n        if (!form || !this._hasEvent(form, 'submit')) return;\n\n        // Progressive enhancement: let native submit work if WS not connected\n        if (!this.client.connected) return;\n\n        // Respect if another handler already prevented the event\n        if (event.defaultPrevented) return;\n\n        event.preventDefault();\n\n        const formData = new FormData(form);\n        const fields = {};\n        for (const [key, value] of formData.entries()) {\n            fields[key] = String(value);\n        }\n\n        this.client.sendEvent(EventType.SUBMIT, form.dataset.hid, fields);\n    }\n\n    /**\n     * Handle focus event\n     */\n    _handleFocus(event) {\n        const el = this._findHidElement(event.target);\n        if (!el || !this._hasEvent(el, 'focus')) return;\n\n        // Apply modifiers (may skip if Self modifier fails)\n        if (!this._applyModifiers(event, el, 'focus')) {\n            return;\n        }\n\n        this.client.sendEvent(EventType.FOCUS, el.dataset.hid);\n    }\n\n    /**\n     * Handle blur event\n     */\n    _handleBlur(event) {\n        const el = this._findHidElement(event.target);\n        if (!el || !this._hasEvent(el, 'blur')) return;\n\n        // Apply modifiers (may skip if Self modifier fails)\n        if (!this._applyModifiers(event, el, 'blur')) {\n            return;\n        }\n\n        this.client.sendEvent(EventType.BLUR, el.dataset.hid);\n    }\n\n    /**\n     * Handle keydown event\n     */\n    _handleKeyDown(event) {\n        const el = this._findHidElement(event.target);\n        if (!el || !this._hasEvent(el, 'keydown')) return;\n\n        // Check for specific key filter (legacy support)\n        const keyFilter = el.dataset.keyFilter;\n        if (keyFilter && !this._matchesKeyFilter(event, keyFilter)) {\n            return;\n        }\n\n        // Apply modifiers (may skip if Self modifier fails)\n        if (!this._applyModifiers(event, el, 'keydown')) {\n            return;\n        }\n\n        this.client.sendEvent(EventType.KEYDOWN, el.dataset.hid, {\n            key: event.key,\n            code: event.code,\n            ctrlKey: event.ctrlKey,\n            shiftKey: event.shiftKey,\n            altKey: event.altKey,\n            metaKey: event.metaKey,\n            repeat: event.repeat,\n            location: event.location,\n        });\n    }\n\n    /**\n     * Handle keyup event\n     */\n    _handleKeyUp(event) {\n        const el = this._findHidElement(event.target);\n        if (!el || !this._hasEvent(el, 'keyup')) return;\n\n        // Apply modifiers (may skip if Self modifier fails)\n        if (!this._applyModifiers(event, el, 'keyup')) {\n            return;\n        }\n\n        this.client.sendEvent(EventType.KEYUP, el.dataset.hid, {\n            key: event.key,\n            code: event.code,\n            ctrlKey: event.ctrlKey,\n            shiftKey: event.shiftKey,\n            altKey: event.altKey,\n            metaKey: event.metaKey,\n            repeat: event.repeat,\n            location: event.location,\n        });\n    }\n\n    /**\n     * Handle mouseenter event\n     */\n    _handleMouseEnter(event) {\n        const el = this._findHidElement(event.target);\n        if (!el || !this._hasEvent(el, 'mouseenter')) return;\n\n        // Apply modifiers (may skip if Self modifier fails)\n        if (!this._applyModifiers(event, el, 'mouseenter')) {\n            return;\n        }\n\n        this.client.sendEvent(EventType.MOUSEENTER, el.dataset.hid);\n    }\n\n    /**\n     * Handle mouseleave event\n     */\n    _handleMouseLeave(event) {\n        const el = this._findHidElement(event.target);\n        if (!el || !this._hasEvent(el, 'mouseleave')) return;\n\n        // Apply modifiers (may skip if Self modifier fails)\n        if (!this._applyModifiers(event, el, 'mouseleave')) {\n            return;\n        }\n\n        this.client.sendEvent(EventType.MOUSELEAVE, el.dataset.hid);\n    }\n\n    /**\n     * Handle scroll event (throttled)\n     */\n    _handleScroll(event) {\n        const el = this._findHidElement(event.target);\n        if (!el || !this._hasEvent(el, 'scroll')) return;\n\n        // Apply modifiers (may skip if Self modifier fails)\n        if (!this._applyModifiers(event, el, 'scroll')) {\n            return;\n        }\n\n        const hid = el.dataset.hid;\n        const throttleMs = this._getThrottle(el, 'scroll');\n\n        // Simple throttle (skip if throttle is 0 for immediate dispatch)\n        if (throttleMs > 0 && this.scrollThrottled.has(hid)) {\n            return;\n        }\n\n        if (throttleMs > 0) {\n            this.scrollThrottled.add(hid);\n            setTimeout(() => {\n                this.scrollThrottled.delete(hid);\n            }, throttleMs);\n        }\n\n        this.client.sendEvent(EventType.SCROLL, hid, {\n            scrollTop: el.scrollTop,\n            scrollLeft: el.scrollLeft,\n        });\n    }\n\n    /**\n     * Handle link click for client-side navigation.\n     *\n     * Per Navigation Contract Section 4.5 (Link Click Navigation):\n     * 1. Do NOT update history immediately\n     * 2. Send EventNavigate { path, replace }\n     * 3. Wait for server response with NAV_* + DOM patches\n     * 4. Apply patches (URL update + DOM update)\n     *\n     * Per Progressive Enhancement Contract Section 5.1:\n     * A link click is intercepted ONLY when ALL conditions are true:\n     * 1. Element has data-vango-link attribute (canonical marker)\n     * 2. WebSocket connection is healthy\n     * 3. Link is same-origin\n     * 4. No modifier keys pressed (ctrl, meta, shift, alt)\n     * 5. No target attribute (or target=\"_self\")\n     * 6. No download attribute\n     *\n     * Note: data-link is supported for backwards compatibility but deprecated.\n     */\n    _handleLinkClick(event) {\n        const link = this._closest(event.target, 'a[href]');\n        if (!link) return;\n\n        // Don't intercept if modifier keys are held (allow open in new tab, etc.)\n        if (event.ctrlKey || event.metaKey || event.shiftKey || event.altKey) {\n            return;\n        }\n\n        // Don't intercept download links\n        if (link.hasAttribute('download')) {\n            return;\n        }\n\n        // Don't intercept links with target (except _self)\n        const target = link.getAttribute('target');\n        if (target && target !== '_self') {\n            return;\n        }\n\n        // Check if link is marked for SPA navigation\n        // data-vango-link is the canonical marker per the routing contract\n        // data-link is deprecated but supported for backwards compatibility\n        const isVangoLink = link.hasAttribute('data-vango-link') || link.hasAttribute('data-link');\n\n        // Only intercept Vango-marked links\n        // Note: Links with click handlers in data-ve are handled by _handleClick, not here\n        if (!isVangoLink) {\n            return; // Let browser handle native navigation\n        }\n\n        // Get the href attribute (raw, may be percent-encoded)\n        const href = link.getAttribute('href');\n        if (!href) return;\n\n        // Check for cross-origin URLs\n        if (href.startsWith('http://') || href.startsWith('https://') || href.startsWith('//')) {\n            try {\n                const url = new URL(href, window.location.origin);\n                if (url.origin !== window.location.origin) {\n                    return; // Cross-origin, let browser handle\n                }\n            } catch {\n                return; // Invalid URL, let browser handle\n            }\n        }\n\n        // Don't intercept if explicitly marked external\n        if (link.hasAttribute('data-external')) {\n            return;\n        }\n\n        // Don't intercept if WebSocket is not connected\n        if (!this.client.connected) {\n            return; // Fall back to native navigation\n        }\n\n        // Prevent default browser navigation\n        event.preventDefault();\n\n        // Track pending navigation for self-heal (connection loss during nav)\n        this.pendingNavPath = href;\n\n        // Per Navigation Contract Section 4.5:\n        // Do NOT update history immediately - wait for server NAV_* response\n        // Send navigate event to server (server will respond with NAV_* patch + DOM patches)\n        this.client.sendEvent(EventType.NAVIGATE, 'nav', { path: href, replace: false });\n    }\n\n    /**\n     * Handle browser back/forward navigation (popstate).\n     *\n     * Per Navigation Contract Section 4.6:\n     * 1. Browser fires popstate event\n     * 2. Client sends EventNavigate { path, replace: true }\n     * 3. Server remounts and sends DOM patches\n     * 4. Server MAY omit NAV_REPLACE since URL already changed\n     *\n     * Note: popstate means the URL has already changed in the browser,\n     * so we use replace: true to avoid server sending NAV_* that would\n     * duplicate the history entry.\n     */\n    _handlePopState(event) {\n        // Don't handle if WebSocket is not connected\n        if (!this.client.connected) {\n            return; // Let native navigation take over\n        }\n\n        // Include search params in navigation path\n        // Note: location.pathname is already decoded by the browser\n        const path = location.pathname + location.search;\n\n        // Track pending navigation for self-heal\n        this.pendingNavPath = path;\n\n        // Send navigate event with replace: true (URL already changed)\n        this.client.sendEvent(EventType.NAVIGATE, 'nav', { path, replace: true });\n    }\n\n    /**\n     * Handle prefetch on hover for links with data-prefetch attribute.\n     *\n     * Per Prefetch Contract Section 8.1:\n     * Client sends EventType.CUSTOM (0xFF) with:\n     * - Name: \"prefetch\"\n     * - Data: JSON-encoded { \"path\": \"/target/path\" }\n     *\n     * Wire format:\n     * [0xFF (CUSTOM)][name: \"prefetch\" (varint-len string)][data: JSON bytes (varint-len)]\n     *\n     * The server can use this to preload route data before the user clicks,\n     * making navigation feel instant.\n     */\n    _handlePrefetch(event) {\n        const link = this._closest(event.target, 'a[data-prefetch][href]');\n        if (!link) return;\n\n        const href = link.getAttribute('href');\n        if (!href) return;\n\n        // Skip external links\n        if (href.startsWith('http://') || href.startsWith('https://') || href.startsWith('//')) {\n            try {\n                const url = new URL(href, window.location.origin);\n                if (url.origin !== window.location.origin) {\n                    return; // Cross-origin, don't prefetch\n                }\n            } catch {\n                return;\n            }\n        }\n\n        // Skip if already prefetched\n        if (this.prefetchedPaths.has(href)) {\n            return;\n        }\n\n        // Skip if WebSocket not connected\n        if (!this.client.connected) {\n            return;\n        }\n\n        // Mark as prefetched\n        this.prefetchedPaths.add(href);\n\n        // Send prefetch event to server\n        // Per the contract, data MUST be JSON bytes, not an object\n        // The codec's encodeEvent expects data as bytes for CUSTOM events\n        const jsonData = JSON.stringify({ path: href });\n        const encoder = new TextEncoder();\n        const dataBytes = encoder.encode(jsonData);\n\n        this.client.sendEvent(EventType.CUSTOM, 'prefetch', { name: 'prefetch', data: dataBytes });\n\n        if (this.client.options.debug) {\n            console.log('[Vango] Prefetching:', href);\n        }\n    }\n\n    /**\n     * Check if event matches key filter\n     * Format: \"Enter\" or \"Ctrl+s\" or \"Meta+Enter\"\n     */\n    _matchesKeyFilter(event, filter) {\n        const parts = filter.split('+');\n        const key = parts.pop().toLowerCase();\n        const modifiers = new Set(parts.map(m => m.toLowerCase()));\n\n        // Check key\n        if (event.key.toLowerCase() !== key) {\n            return false;\n        }\n\n        // Check modifiers\n        const hasCtrl = modifiers.has('ctrl') || modifiers.has('control');\n        const hasShift = modifiers.has('shift');\n        const hasAlt = modifiers.has('alt');\n        const hasMeta = modifiers.has('meta') || modifiers.has('cmd');\n\n        if (hasCtrl !== event.ctrlKey) return false;\n        if (hasShift !== event.shiftKey) return false;\n        if (hasAlt !== event.altKey) return false;\n        if (hasMeta !== event.metaKey) return false;\n\n        return true;\n    }\n}\n", "/**\n * Patch Application\n *\n * Applies DOM patches received from the server.\n */\n\nimport { PatchType, EventType } from './codec.js';\n\nexport class PatchApplier {\n    constructor(client) {\n        this.client = client;\n    }\n\n    /**\n     * Apply array of patches\n     */\n    apply(patches) {\n        for (const patch of patches) {\n            this.applyPatch(patch);\n        }\n    }\n\n    /**\n     * Check if a patch type requires a target DOM node.\n     * URL/NAV patches operate on browser history, not DOM elements.\n     * Per spec Section 9.6.1: These must not trigger self-heal.\n     */\n    _requiresTargetNode(patchType) {\n        switch (patchType) {\n            // URL/NAV patches have no HID (operate on browser history)\n            case PatchType.URL_PUSH:\n            case PatchType.URL_REPLACE:\n            case PatchType.NAV_PUSH:\n            case PatchType.NAV_REPLACE:\n                return false;\n            // INSERT_NODE checks parent separately\n            case PatchType.INSERT_NODE:\n                return false;\n            // All other patches require a target node\n            default:\n                return true;\n        }\n    }\n\n    /**\n     * Trigger self-heal recovery per spec Section 9.6.1.\n     * If navigation in progress: location.assign(pendingPath)\n     * Else: location.reload()\n     */\n    _triggerSelfHeal() {\n        // NOTE: Correct reference is eventCapture, not events\n        const pendingPath = this.client.eventCapture?.pendingNavPath;\n        if (pendingPath) {\n            console.log('[Vango] Self-heal: navigating to pending path:', pendingPath);\n            location.assign(pendingPath);\n        } else {\n            console.log('[Vango] Self-heal: reloading page');\n            location.reload();\n        }\n    }\n\n    /**\n     * Apply single patch\n     */\n    applyPatch(patch) {\n        const el = this.client.getNode(patch.hid);\n\n        // Only trigger self-heal for patches that require a target node\n        if (!el && this._requiresTargetNode(patch.type)) {\n            // Per spec 9.6.1: Patch mismatch = client/server DOM drift\n            console.error('[Vango] Patch target not found (HID:', patch.hid, 'type:', patch.type, ')');\n            this._triggerSelfHeal();\n            return;\n        }\n\n        switch (patch.type) {\n            case PatchType.SET_TEXT:\n                this._setText(el, patch.value);\n                break;\n\n            case PatchType.SET_ATTR:\n                this._setAttr(el, patch.key, patch.value);\n                break;\n\n            case PatchType.REMOVE_ATTR:\n                this._removeAttr(el, patch.key);\n                break;\n\n            case PatchType.ADD_CLASS:\n                el.classList.add(patch.className);\n                break;\n\n            case PatchType.REMOVE_CLASS:\n                el.classList.remove(patch.className);\n                break;\n\n            case PatchType.TOGGLE_CLASS:\n                el.classList.toggle(patch.className);\n                break;\n\n            case PatchType.SET_STYLE:\n                el.style[patch.key] = patch.value;\n                break;\n\n            case PatchType.REMOVE_STYLE:\n                el.style[patch.key] = '';\n                break;\n\n            case PatchType.INSERT_NODE:\n                this._insertNode(patch.parentID, patch.index, patch.vnode);\n                break;\n\n            case PatchType.REMOVE_NODE:\n                this._removeNode(el, patch.hid);\n                break;\n\n            case PatchType.MOVE_NODE:\n                this._moveNode(el, patch.parentID, patch.index);\n                break;\n\n            case PatchType.REPLACE_NODE:\n                this._replaceNode(el, patch.hid, patch.vnode);\n                break;\n\n            case PatchType.SET_VALUE:\n                this._setValue(el, patch.value);\n                break;\n\n            case PatchType.SET_CHECKED:\n                el.checked = patch.value;\n                break;\n\n            case PatchType.SET_SELECTED:\n                el.selected = patch.value;\n                break;\n\n            case PatchType.FOCUS:\n                el.focus();\n                break;\n\n            case PatchType.BLUR:\n                el.blur();\n                break;\n\n            case PatchType.SCROLL_TO:\n                el.scrollTo({\n                    left: patch.x,\n                    top: patch.y,\n                    behavior: patch.behavior === 1 ? 'smooth' : 'instant',\n                });\n                break;\n\n            case PatchType.SET_DATA:\n                el.dataset[patch.key] = patch.value;\n                break;\n\n            case PatchType.DISPATCH:\n                this._dispatchEvent(el, patch.eventName, patch.detail);\n                break;\n\n            // NOTE: PatchType.EVAL has been REMOVED for security.\n            // Executing arbitrary JS from server is an XSS/RCE risk.\n\n            case PatchType.URL_PUSH:\n            case PatchType.URL_REPLACE:\n                // Delegate to URLManager\n                if (this.client.urlManager) {\n                    this.client.urlManager.applyPatch(patch);\n                }\n                break;\n\n            case PatchType.NAV_PUSH:\n            case PatchType.NAV_REPLACE:\n                // Handle full navigation from server\n                this._applyNavPatch(patch);\n                break;\n\n            default:\n                if (this.client.options.debug) {\n                    console.warn('[Vango] Unknown patch type:', patch.type);\n                }\n        }\n    }\n\n    /**\n     * Set text content\n     */\n    _setText(el, text) {\n        el.textContent = text;\n    }\n\n    /**\n     * Set attribute with special cases\n     */\n    _setAttr(el, key, value) {\n        // SECURITY: Block ALL on* attributes (case-insensitive) to prevent XSS\n        // This is defense-in-depth; the server should never send these.\n        if (key.length > 2 && key.substring(0, 2).toLowerCase() === 'on') {\n            console.warn('[Vango] Blocked dangerous attribute:', key);\n            return;\n        }\n\n        switch (key) {\n            case 'class':\n                el.className = value;\n                break;\n            case 'for':\n                el.htmlFor = value;\n                break;\n            case 'value':\n                this._setValue(el, value);\n                break;\n            case 'checked':\n                el.checked = value === 'true' || value === '';\n                break;\n            case 'selected':\n                el.selected = value === 'true' || value === '';\n                break;\n            case 'disabled':\n            case 'readonly':\n            case 'required':\n            case 'multiple':\n            case 'autofocus':\n                // Boolean attributes\n                if (value === 'true' || value === '') {\n                    el.setAttribute(key, '');\n                } else {\n                    el.removeAttribute(key);\n                }\n                break;\n            default:\n                el.setAttribute(key, value);\n        }\n    }\n\n    /**\n     * Remove attribute\n     */\n    _removeAttr(el, key) {\n        switch (key) {\n            case 'class':\n                el.className = '';\n                break;\n            case 'for':\n                el.htmlFor = '';\n                break;\n            case 'value':\n                el.value = '';\n                break;\n            case 'checked':\n                el.checked = false;\n                break;\n            case 'selected':\n                el.selected = false;\n                break;\n            default:\n                el.removeAttribute(key);\n        }\n    }\n\n    /**\n     * Set input value (preserving cursor position)\n     */\n    _setValue(el, value) {\n        if (el.value === value) return;\n\n        // Preserve cursor position for text inputs\n        if (el.type === 'text' || el.tagName === 'TEXTAREA') {\n            const start = el.selectionStart;\n            const end = el.selectionEnd;\n            el.value = value;\n\n            // Restore cursor if element is focused\n            if (document.activeElement === el) {\n                el.setSelectionRange(\n                    Math.min(start, value.length),\n                    Math.min(end, value.length)\n                );\n            }\n        } else {\n            el.value = value;\n        }\n    }\n\n    /**\n     * Insert node at index in parent\n     */\n    _insertNode(parentHid, index, vnode) {\n        const parentEl = this.client.getNode(parentHid);\n        if (!parentEl) {\n            // Per spec 9.6.1: Missing parent = DOM drift, trigger self-heal\n            console.error('[Vango] INSERT_NODE parent not found (parentHID:', parentHid, ')');\n            this._triggerSelfHeal();\n            return;\n        }\n\n        const newEl = this._createNode(vnode);\n\n        if (index >= parentEl.children.length) {\n            parentEl.appendChild(newEl);\n        } else {\n            parentEl.insertBefore(newEl, parentEl.children[index]);\n        }\n    }\n\n    /**\n     * Remove node\n     */\n    _removeNode(el, hid) {\n        // Cleanup hooks\n        this.client.hooks.destroyForNode(el);\n\n        // Remove from map\n        this.client.unregisterNode(hid);\n\n        // Unregister all children with HIDs\n        el.querySelectorAll('[data-hid]').forEach(child => {\n            this.client.hooks.destroyForNode(child);\n            this.client.unregisterNode(child.dataset.hid);\n        });\n\n        // Remove from DOM\n        el.remove();\n    }\n\n    /**\n     * Move node to new position\n     */\n    _moveNode(el, parentHid, index) {\n        const parentEl = this.client.getNode(parentHid);\n        if (!parentEl) {\n            // Per spec 9.6.1: Missing parent = DOM drift, trigger self-heal\n            console.error('[Vango] MOVE_NODE parent not found (parentHID:', parentHid, ')');\n            this._triggerSelfHeal();\n            return;\n        }\n\n        if (index >= parentEl.children.length) {\n            parentEl.appendChild(el);\n        } else {\n            parentEl.insertBefore(el, parentEl.children[index]);\n        }\n    }\n\n    /**\n     * Replace node\n     */\n    _replaceNode(el, hid, vnode) {\n        // Cleanup old\n        this.client.hooks.destroyForNode(el);\n        this.client.unregisterNode(hid);\n        el.querySelectorAll('[data-hid]').forEach(child => {\n            this.client.hooks.destroyForNode(child);\n            this.client.unregisterNode(child.dataset.hid);\n        });\n\n        // Create and insert new\n        const newEl = this._createNode(vnode);\n        el.replaceWith(newEl);\n    }\n\n    /**\n     * Create DOM node from VNode\n     */\n    _createNode(vnode) {\n        switch (vnode.type) {\n            case 'element':\n                return this._createElement(vnode);\n            case 'text':\n                return document.createTextNode(vnode.text);\n            case 'fragment':\n                return this._createFragment(vnode);\n            default:\n                if (this.client.options.debug) {\n                    console.warn('[Vango] Unknown vnode type:', vnode.type);\n                }\n                return document.createTextNode('');\n        }\n    }\n\n    /**\n     * Create element from VNode\n     */\n    _createElement(vnode) {\n        const el = document.createElement(vnode.tag);\n\n        // Set attributes\n        for (const [key, value] of Object.entries(vnode.attrs || {})) {\n            this._setAttr(el, key, value);\n        }\n\n        // Set HID and register\n        if (vnode.hid) {\n            el.dataset.hid = vnode.hid;\n            this.client.registerNode(vnode.hid, el);\n        }\n\n        // Create children\n        for (const child of vnode.children || []) {\n            el.appendChild(this._createNode(child));\n        }\n\n        // Initialize hooks\n        this.client.hooks.initializeForNode(el);\n\n        return el;\n    }\n\n    /**\n     * Create document fragment\n     */\n    _createFragment(vnode) {\n        const frag = document.createDocumentFragment();\n        for (const child of vnode.children || []) {\n            frag.appendChild(this._createNode(child));\n        }\n        return frag;\n    }\n\n    /**\n     * Dispatch custom event\n     */\n    _dispatchEvent(el, eventName, detail) {\n        let parsedDetail = null;\n        if (detail) {\n            try {\n                parsedDetail = JSON.parse(detail);\n            } catch (e) {\n                parsedDetail = detail;\n            }\n        }\n\n        // Handle special \"vango:navigate\" event for programmatic navigation\n        if (eventName === 'vango:navigate') {\n            this._handleNavigate(parsedDetail);\n            return;\n        }\n\n        // For regular events, dispatch on document if no target element\n        const target = el || document;\n        const event = new CustomEvent(eventName, {\n            detail: parsedDetail,\n            bubbles: true,\n            cancelable: true,\n        });\n        target.dispatchEvent(event);\n    }\n\n    /**\n     * Handle server-initiated navigation via NAV_PUSH/NAV_REPLACE patches.\n     * This is the contract-compliant implementation that does NOT send\n     * EventNavigate back to the server (server already rendered the new page).\n     *\n     * Per spec Section 4.2 (Navigation Contract):\n     * 1. Receive NAV_* patch\n     * 2. Update history via pushState/replaceState with provided path\n     * 3. Apply subsequent DOM patches\n     * 4. Do NOT send EventNavigate back to server\n     */\n    _applyNavPatch(patch) {\n        const { path, type } = patch;\n\n        // SECURITY: Validate path is relative (starts with \"/\")\n        // This prevents open-redirect attacks\n        if (!path || !path.startsWith('/')) {\n            console.error('[Vango] Invalid navigation path (must start with /):', path);\n            return;\n        }\n\n        // Ensure path doesn't contain protocol to prevent open-redirect\n        if (path.includes('://') || path.startsWith('//')) {\n            console.error('[Vango] Invalid navigation path (must be relative):', path);\n            return;\n        }\n\n        // Update browser history based on patch type\n        // NAV_PUSH = add new entry, NAV_REPLACE = replace current entry\n        if (type === PatchType.NAV_REPLACE) {\n            history.replaceState(null, '', path);\n        } else {\n            history.pushState(null, '', path);\n        }\n\n        // Clear any pending navigation tracking\n        if (this.client.eventCapture) {\n            this.client.eventCapture.pendingNavPath = null;\n        }\n\n        // Scroll to top (default behavior for navigation)\n        window.scrollTo({ top: 0, behavior: 'instant' });\n\n        if (this.client.options.debug) {\n            console.log('[Vango] Navigation applied:', path, type === PatchType.NAV_REPLACE ? '(replace)' : '(push)');\n        }\n    }\n\n    /**\n     * Handle server-initiated navigation via dispatch patch (DEPRECATED).\n     * This is the legacy mechanism using vango:navigate custom event.\n     * New code should use NAV_PUSH/NAV_REPLACE patches instead.\n     */\n    _handleNavigate(data) {\n        if (!data || !data.path) {\n            if (this.client.options.debug) {\n                console.warn('[Vango] Invalid navigate data:', data);\n            }\n            return;\n        }\n\n        const { path, replace, scroll } = data;\n\n        // Update browser history\n        if (replace) {\n            history.replaceState(null, '', path);\n        } else {\n            history.pushState(null, '', path);\n        }\n\n        // Send navigate event to server to trigger re-render\n        // NOTE: This roundtrip is deprecated behavior. NAV_* patches are preferred.\n        this.client.sendEvent(EventType.NAVIGATE, 'nav', { path });\n\n        // Scroll to top if requested (default: true)\n        if (scroll !== false) {\n            window.scrollTo({ top: 0, behavior: 'instant' });\n        }\n\n        if (this.client.options.debug) {\n            console.log('[Vango] Navigated to:', path, { replace, scroll });\n        }\n    }\n\n    // NOTE: _evalCode method has been REMOVED for security.\n    // Executing arbitrary JS from server is an XSS/RCE risk.\n    // Use client-side hooks or custom events for safe JS interop.\n}\n", "/**\n * Optimistic Update Handling\n *\n * Provides instant feedback for user actions before server confirms.\n */\n\nexport class OptimisticUpdates {\n    constructor(client) {\n        this.client = client;\n        this.pending = new Map(); // hid -> [{ type, key, original }]\n    }\n\n    /**\n     * Apply optimistic update based on element data attributes.\n     * Parses data-optimistic='{\"class\":\"...\",\"text\":\"...\",\"attr\":\"...\",\"value\":\"...\"}' format\n     * per spec Section 5.2.\n     */\n    applyOptimistic(el, eventType) {\n        const hid = el.dataset.hid;\n        if (!hid) return;\n\n        // Parse JSON data-optimistic attribute\n        const optimisticData = el.dataset.optimistic;\n        if (!optimisticData) return;\n\n        try {\n            const config = JSON.parse(optimisticData);\n\n            // Check for optimistic class toggle\n            if (config.class) {\n                this._applyClassOptimistic(el, hid, config.class);\n            }\n\n            // Check for optimistic text\n            if (config.text) {\n                this._applyTextOptimistic(el, hid, config.text);\n            }\n\n            // Check for optimistic attribute\n            if (config.attr && config.value !== undefined) {\n                this._applyAttrOptimistic(el, hid, config.attr, config.value);\n            }\n        } catch (e) {\n            console.warn('[Vango] Invalid optimistic config:', e);\n        }\n    }\n\n    /**\n     * Apply optimistic class toggle\n     * Format: \"classname\" or \"classname:add\" or \"classname:remove\" or \"classname:toggle\"\n     */\n    _applyClassOptimistic(el, hid, classConfig) {\n        const [className, action = 'toggle'] = classConfig.split(':');\n\n        // Store original state\n        const original = el.classList.contains(className);\n\n        // Apply change\n        switch (action) {\n            case 'add':\n                el.classList.add(className);\n                break;\n            case 'remove':\n                el.classList.remove(className);\n                break;\n            case 'toggle':\n            default:\n                el.classList.toggle(className);\n        }\n\n        // Track for potential revert\n        this._trackPending(hid, 'class', className, original);\n    }\n\n    /**\n     * Apply optimistic text change\n     */\n    _applyTextOptimistic(el, hid, text) {\n        // Store original\n        const original = el.textContent;\n\n        // Apply change\n        el.textContent = text;\n\n        // Track for revert\n        this._trackPending(hid, 'text', null, original);\n    }\n\n    /**\n     * Apply optimistic attribute change\n     */\n    _applyAttrOptimistic(el, hid, attr, value) {\n        // SECURITY: Block on* attributes to prevent XSS\n        if (attr.length > 2 && attr.substring(0, 2).toLowerCase() === 'on') {\n            console.warn('[Vango] Blocked dangerous optimistic attribute:', attr);\n            return;\n        }\n\n        // Store original\n        const original = el.getAttribute(attr);\n\n        // Apply change\n        if (value === 'null' || value === '') {\n            el.removeAttribute(attr);\n        } else {\n            el.setAttribute(attr, value);\n        }\n\n        // Track for revert\n        this._trackPending(hid, 'attr', attr, original);\n    }\n\n    /**\n     * Track pending optimistic update\n     */\n    _trackPending(hid, type, key, original) {\n        if (!this.pending.has(hid)) {\n            this.pending.set(hid, []);\n        }\n        this.pending.get(hid).push({ type, key, original });\n    }\n\n    /**\n     * Clear pending updates (called when server confirms)\n     */\n    clearPending() {\n        this.pending.clear();\n    }\n\n    /**\n     * Revert all pending updates (called on error)\n     */\n    revertAll() {\n        for (const [hid, updates] of this.pending) {\n            const el = this.client.getNode(hid);\n            if (!el) continue;\n\n            for (const update of updates) {\n                this._revertUpdate(el, update);\n            }\n        }\n        this.pending.clear();\n    }\n\n    /**\n     * Revert single update\n     */\n    _revertUpdate(el, update) {\n        switch (update.type) {\n            case 'class':\n                if (update.original) {\n                    el.classList.add(update.key);\n                } else {\n                    el.classList.remove(update.key);\n                }\n                break;\n            case 'text':\n                el.textContent = update.original;\n                break;\n            case 'attr':\n                if (update.original === null) {\n                    el.removeAttribute(update.key);\n                } else {\n                    el.setAttribute(update.key, update.original);\n                }\n                break;\n        }\n    }\n}\n", "/**\n * Sortable List Hook\n *\n * Provides drag-to-reorder functionality for lists.\n * Minimal implementation (~1KB vs 8KB for SortableJS).\n */\n\nexport class SortableHook {\n    mounted(el, config, pushEvent) {\n        this.el = el;\n        this.config = config;\n        this.pushEvent = pushEvent;\n\n        this.animation = config.animation || 150;\n        this.handle = config.handle || null;\n        this.ghostClass = config.ghostClass || 'sortable-ghost';\n        this.dragClass = config.dragClass || 'sortable-drag';\n\n        this.dragging = null;\n        this.ghost = null;\n        this.startIndex = -1;\n\n        this._bindEvents();\n    }\n\n    updated(el, config, pushEvent) {\n        this.config = config;\n        this.pushEvent = pushEvent;\n    }\n\n    destroyed(el) {\n        this._unbindEvents();\n    }\n\n    _bindEvents() {\n        this._onMouseDown = this._handleMouseDown.bind(this);\n        this._onMouseMove = this._handleMouseMove.bind(this);\n        this._onMouseUp = this._handleMouseUp.bind(this);\n\n        this.el.addEventListener('mousedown', this._onMouseDown);\n        document.addEventListener('mousemove', this._onMouseMove);\n        document.addEventListener('mouseup', this._onMouseUp);\n\n        // Touch events\n        this._onTouchStart = this._handleTouchStart.bind(this);\n        this._onTouchMove = this._handleTouchMove.bind(this);\n        this._onTouchEnd = this._handleTouchEnd.bind(this);\n\n        this.el.addEventListener('touchstart', this._onTouchStart, { passive: false });\n        document.addEventListener('touchmove', this._onTouchMove, { passive: false });\n        document.addEventListener('touchend', this._onTouchEnd);\n    }\n\n    _unbindEvents() {\n        this.el.removeEventListener('mousedown', this._onMouseDown);\n        document.removeEventListener('mousemove', this._onMouseMove);\n        document.removeEventListener('mouseup', this._onMouseUp);\n\n        this.el.removeEventListener('touchstart', this._onTouchStart);\n        document.removeEventListener('touchmove', this._onTouchMove);\n        document.removeEventListener('touchend', this._onTouchEnd);\n    }\n\n    _handleMouseDown(e) {\n        const item = this._findItem(e.target);\n        if (!item) return;\n\n        // Check handle\n        if (this.handle && (typeof e.target?.closest !== 'function' || !e.target.closest(this.handle))) return;\n\n        e.preventDefault();\n        this._startDrag(item, e.clientX, e.clientY);\n    }\n\n    _handleTouchStart(e) {\n        const item = this._findItem(e.target);\n        if (!item) return;\n\n        if (this.handle && (typeof e.target?.closest !== 'function' || !e.target.closest(this.handle))) return;\n\n        e.preventDefault();\n        const touch = e.touches[0];\n        this._startDrag(item, touch.clientX, touch.clientY);\n    }\n\n    _findItem(target) {\n        // Find direct child of container\n        let item = target;\n        while (item && item.parentElement !== this.el) {\n            item = item.parentElement;\n        }\n        return item;\n    }\n\n    _startDrag(item, x, y) {\n        this.dragging = item;\n        this.activeContainer = item.parentElement;\n        this.initialContainer = this.activeContainer;\n        this.startIndex = Array.from(this.activeContainer.children).indexOf(item);\n        this.startY = y;\n        this.startX = x;\n        this.itemHeight = item.offsetHeight;\n\n        // Store initial positions\n        const rect = item.getBoundingClientRect();\n        this.ghostStartTop = rect.top;\n        this.ghostStartLeft = rect.left;\n\n        // Create ghost\n        this.ghost = item.cloneNode(true);\n        this.ghost.classList.add(this.ghostClass);\n        this.ghost.style.position = 'fixed';\n        this.ghost.style.zIndex = '9999';\n        this.ghost.style.width = `${item.offsetWidth}px`;\n        this.ghost.style.height = `${item.offsetHeight}px`;\n        this.ghost.style.left = `${this.ghostStartLeft}px`;\n        this.ghost.style.top = `${this.ghostStartTop}px`;\n        this.ghost.style.pointerEvents = 'none';\n        this.ghost.style.opacity = '0.8';\n        this.ghost.style.transition = 'none';\n        document.body.appendChild(this.ghost);\n\n        // Style dragging item\n        item.classList.add(this.dragClass);\n        item.style.opacity = '0.4';\n    }\n\n    _handleMouseMove(e) {\n        if (!this.dragging) return;\n        e.preventDefault();\n        this._updateDrag(e.clientX, e.clientY);\n    }\n\n    _handleTouchMove(e) {\n        if (!this.dragging) return;\n        e.preventDefault();\n        const touch = e.touches[0];\n        this._updateDrag(touch.clientX, touch.clientY);\n    }\n\n    _updateDrag(x, y) {\n        // Move ghost\n        const deltaY = y - this.startY;\n        const deltaX = x - this.startX;\n        if (this.ghost) {\n            this.ghost.style.top = `${this.ghostStartTop + deltaY}px`;\n            this.ghost.style.left = `${this.ghostStartLeft + deltaX}px`;\n        }\n\n        // Check for cross-container drag\n        // We peek at the element under cursor to see if we moved to another sortable list\n        // Note: we must temporarily hide ghost to not hit it with elementFromPoint\n        this.ghost.style.display = 'none';\n        const elUnderCursor = document.elementFromPoint(x, y);\n        this.ghost.style.display = '';\n\n        if (elUnderCursor) {\n            const targetContainer = elUnderCursor.closest('[data-hook=\"Sortable\"]');\n\n            // If we found a container, it's different from current, and shares the same group\n            if (targetContainer &&\n                targetContainer !== this.activeContainer &&\n                targetContainer.dataset.hookConfig) {\n\n                try {\n                    const targetConfig = JSON.parse(targetContainer.dataset.hookConfig);\n                    if (targetConfig.group === this.config.group) {\n                        // Move dragging item to new container\n                        this.activeContainer = targetContainer;\n                        this.activeContainer.appendChild(this.dragging);\n                        // Config update will happen on next render or we can assume same behavior\n                    }\n                } catch (e) {\n                    // Ignore invalid config\n                }\n            }\n        }\n\n        // Find insert position within current container (this.activeContainer)\n        const children = Array.from(this.activeContainer.children);\n        const currentIndex = children.indexOf(this.dragging);\n\n        for (let i = 0; i < children.length; i++) {\n            if (i === currentIndex) continue;\n\n            const child = children[i];\n            const rect = child.getBoundingClientRect();\n\n            // Simple logic: if overlapping significantly or past midpoint\n            // Vertical list logic\n            const midpoint = rect.top + rect.height / 2;\n\n            if (y < midpoint && i < currentIndex) {\n                this.activeContainer.insertBefore(this.dragging, child);\n                break;\n            } else if (y > midpoint && i > currentIndex) {\n                this.activeContainer.insertBefore(this.dragging, child.nextSibling);\n                break;\n            }\n        }\n    }\n\n    _handleMouseUp(e) {\n        if (!this.dragging) return;\n        this._endDrag();\n    }\n\n    _handleTouchEnd(e) {\n        if (!this.dragging) return;\n        this._endDrag();\n    }\n\n    _endDrag() {\n        const endIndex = Array.from(this.activeContainer.children).indexOf(this.dragging);\n        const id = this.dragging.dataset.id || this.dragging.dataset.hid;\n        const targetContainerHid = this.activeContainer.dataset.hid;\n\n        // Cleanup\n        this.dragging.classList.remove(this.dragClass);\n        this.dragging.style.opacity = '';\n        if (this.ghost) {\n            this.ghost.remove();\n        }\n\n        // Send event if position changed OR container changed\n        if (this.activeContainer !== this.initialContainer || endIndex !== this.startIndex) {\n            this.pushEvent('reorder', {\n                id: id,\n                fromContainer: this.initialContainer.dataset.id || this.initialContainer.dataset.hid,\n                toContainer: this.activeContainer.dataset.id || this.activeContainer.dataset.hid,\n                fromIndex: this.startIndex,\n                toIndex: endIndex,\n            });\n        }\n\n        this.dragging = null;\n        this.ghost = null;\n        this.activeContainer = null;\n        this.initialContainer = null;\n    }\n}\n", "/**\n * Draggable Hook\n *\n * Provides free-form drag functionality for elements.\n */\n\nexport class DraggableHook {\n    mounted(el, config, pushEvent) {\n        this.el = el;\n        this.config = config;\n        this.pushEvent = pushEvent;\n\n        this.axis = config.axis || 'both'; // 'x', 'y', or 'both'\n        this.handle = config.handle || null;\n        this.bounds = config.bounds || null; // 'parent', 'window', or null\n\n        this.dragging = false;\n        this.startX = 0;\n        this.startY = 0;\n        this.currentX = 0;\n        this.currentY = 0;\n\n        this._bindEvents();\n    }\n\n    updated(el, config, pushEvent) {\n        this.config = config;\n        this.pushEvent = pushEvent;\n        this.axis = config.axis || 'both';\n        this.bounds = config.bounds || null;\n    }\n\n    destroyed(el) {\n        this._unbindEvents();\n    }\n\n    _bindEvents() {\n        this._onMouseDown = this._handleMouseDown.bind(this);\n        this._onMouseMove = this._handleMouseMove.bind(this);\n        this._onMouseUp = this._handleMouseUp.bind(this);\n\n        const handleEl = this.handle ? this.el.querySelector(this.handle) : this.el;\n        if (handleEl) {\n            handleEl.addEventListener('mousedown', this._onMouseDown);\n        }\n        document.addEventListener('mousemove', this._onMouseMove);\n        document.addEventListener('mouseup', this._onMouseUp);\n\n        // Touch events\n        this._onTouchStart = this._handleTouchStart.bind(this);\n        this._onTouchMove = this._handleTouchMove.bind(this);\n        this._onTouchEnd = this._handleTouchEnd.bind(this);\n\n        if (handleEl) {\n            handleEl.addEventListener('touchstart', this._onTouchStart, { passive: false });\n        }\n        document.addEventListener('touchmove', this._onTouchMove, { passive: false });\n        document.addEventListener('touchend', this._onTouchEnd);\n    }\n\n    _unbindEvents() {\n        const handleEl = this.handle ? this.el.querySelector(this.handle) : this.el;\n        if (handleEl) {\n            handleEl.removeEventListener('mousedown', this._onMouseDown);\n            handleEl.removeEventListener('touchstart', this._onTouchStart);\n        }\n        document.removeEventListener('mousemove', this._onMouseMove);\n        document.removeEventListener('mouseup', this._onMouseUp);\n        document.removeEventListener('touchmove', this._onTouchMove);\n        document.removeEventListener('touchend', this._onTouchEnd);\n    }\n\n    _handleMouseDown(e) {\n        e.preventDefault();\n        this._startDrag(e.clientX, e.clientY);\n    }\n\n    _handleTouchStart(e) {\n        e.preventDefault();\n        const touch = e.touches[0];\n        this._startDrag(touch.clientX, touch.clientY);\n    }\n\n    _startDrag(x, y) {\n        this.dragging = true;\n        this.startX = x - this.currentX;\n        this.startY = y - this.currentY;\n\n        this.el.classList.add('dragging');\n    }\n\n    _handleMouseMove(e) {\n        if (!this.dragging) return;\n        e.preventDefault();\n        this._updatePosition(e.clientX, e.clientY);\n    }\n\n    _handleTouchMove(e) {\n        if (!this.dragging) return;\n        e.preventDefault();\n        const touch = e.touches[0];\n        this._updatePosition(touch.clientX, touch.clientY);\n    }\n\n    _updatePosition(x, y) {\n        let newX = x - this.startX;\n        let newY = y - this.startY;\n\n        // Apply axis constraint\n        if (this.axis === 'x') {\n            newY = this.currentY;\n        } else if (this.axis === 'y') {\n            newX = this.currentX;\n        }\n\n        // Apply bounds\n        if (this.bounds) {\n            const bounds = this._getBounds();\n            newX = Math.max(bounds.minX, Math.min(bounds.maxX, newX));\n            newY = Math.max(bounds.minY, Math.min(bounds.maxY, newY));\n        }\n\n        this.currentX = newX;\n        this.currentY = newY;\n\n        // Apply transform\n        this.el.style.transform = `translate(${newX}px, ${newY}px)`;\n    }\n\n    _getBounds() {\n        const rect = this.el.getBoundingClientRect();\n        let container;\n\n        if (this.bounds === 'parent') {\n            container = this.el.parentElement.getBoundingClientRect();\n        } else {\n            container = {\n                left: 0,\n                top: 0,\n                right: window.innerWidth,\n                bottom: window.innerHeight,\n            };\n        }\n\n        return {\n            minX: container.left - rect.left + this.currentX,\n            maxX: container.right - rect.right + this.currentX,\n            minY: container.top - rect.top + this.currentY,\n            maxY: container.bottom - rect.bottom + this.currentY,\n        };\n    }\n\n    _handleMouseUp(e) {\n        if (!this.dragging) return;\n        this._endDrag();\n    }\n\n    _handleTouchEnd(e) {\n        if (!this.dragging) return;\n        this._endDrag();\n    }\n\n    _endDrag() {\n        this.dragging = false;\n        this.el.classList.remove('dragging');\n\n        // Send position to server\n        this.pushEvent('position', {\n            x: this.currentX,\n            y: this.currentY,\n        });\n    }\n}\n", "/**\n * Droppable Hook - Drop Zones\n *\n * Provides drop zone functionality. Fires 'drop' event when element is dropped.\n * Config: accept (CSS selector), hoverClass (default: 'drag-over')\n */\n\nexport class DroppableHook {\n    mounted(el, config, pushEvent) {\n        this.el = el;\n        this.config = config;\n        this.pushEvent = pushEvent;\n        this.hoverClass = config.hoverClass || 'drag-over';\n        this._bind();\n    }\n\n    updated(el, config, pushEvent) {\n        this.config = config;\n        this.pushEvent = pushEvent;\n        this.hoverClass = config.hoverClass || 'drag-over';\n    }\n\n    destroyed() { this._unbind(); }\n\n    _bind() {\n        this._enter = e => { e.preventDefault(); this.el.classList.add(this.hoverClass); };\n        this._over = e => { e.preventDefault(); e.dataTransfer.dropEffect = 'move'; };\n        this._leave = e => { if (!this.el.contains(e.relatedTarget)) this.el.classList.remove(this.hoverClass); };\n        this._drop = e => {\n            e.preventDefault();\n            this.el.classList.remove(this.hoverClass);\n            const data = { x: e.clientX, y: e.clientY };\n            if (window.__vango_dragging__) {\n                const d = window.__vango_dragging__;\n                data.id = d.dataset.id || d.dataset.hid;\n                window.__vango_dragging__ = null;\n            }\n            const files = e.dataTransfer?.files;\n            if (files?.length) data.fileNames = Array.from(files).map(f => f.name);\n            const text = e.dataTransfer?.getData('text/plain');\n            if (text) data.text = text;\n            this.pushEvent('drop', data);\n        };\n        this.el.addEventListener('dragenter', this._enter);\n        this.el.addEventListener('dragover', this._over);\n        this.el.addEventListener('dragleave', this._leave);\n        this.el.addEventListener('drop', this._drop);\n    }\n\n    _unbind() {\n        this.el.removeEventListener('dragenter', this._enter);\n        this.el.removeEventListener('dragover', this._over);\n        this.el.removeEventListener('dragleave', this._leave);\n        this.el.removeEventListener('drop', this._drop);\n    }\n}\n", "/**\n * Resizable Hook - Resize Handles\n *\n * Provides resize handles on elements. Fires 'resize' event when resize completes.\n *\n * Config: handles (default: 'se'), minWidth, maxWidth, minHeight, maxHeight\n */\n\nexport class ResizableHook {\n    mounted(el, config, pushEvent) {\n        this.el = el;\n        this.config = config;\n        this.pushEvent = pushEvent;\n        this.handles = (config.handles || 'se').split(',').map(h => h.trim());\n        this.resizing = false;\n        this._handleEls = [];\n        this._createHandles();\n        this._bind();\n    }\n\n    updated(el, config, pushEvent) {\n        this.config = config;\n        this.pushEvent = pushEvent;\n    }\n\n    destroyed() {\n        this._unbind();\n        this._handleEls.forEach(h => h.remove());\n    }\n\n    _createHandles() {\n        if (getComputedStyle(this.el).position === 'static') {\n            this.el.style.position = 'relative';\n        }\n        const cursors = { n: 'n', s: 's', e: 'e', w: 'w', ne: 'ne', se: 'se', sw: 'sw', nw: 'nw' };\n        for (const h of this.handles) {\n            if (!cursors[h]) continue;\n            const el = document.createElement('div');\n            el.dataset.handle = h;\n            el.style.cssText = `position:absolute;z-index:10;cursor:${h}-resize;` + this._pos(h);\n            this.el.appendChild(el);\n            this._handleEls.push(el);\n        }\n    }\n\n    _pos(h) {\n        const s = 8, hs = 4;\n        const m = { n: `top:-${hs}px;left:25%;width:50%;height:${s}px`,\n            s: `bottom:-${hs}px;left:25%;width:50%;height:${s}px`,\n            e: `right:-${hs}px;top:25%;width:${s}px;height:50%`,\n            w: `left:-${hs}px;top:25%;width:${s}px;height:50%`,\n            ne: `top:-${hs}px;right:-${hs}px;width:${s}px;height:${s}px`,\n            se: `bottom:-${hs}px;right:-${hs}px;width:${s}px;height:${s}px`,\n            sw: `bottom:-${hs}px;left:-${hs}px;width:${s}px;height:${s}px`,\n            nw: `top:-${hs}px;left:-${hs}px;width:${s}px;height:${s}px` };\n        return m[h] || '';\n    }\n\n    _bind() {\n        this._onDown = e => { e.preventDefault(); this._start(e.target.dataset.handle, e.clientX, e.clientY); };\n        this._onMove = e => { if (this.resizing) { e.preventDefault(); this._update(e.clientX, e.clientY); } };\n        this._onUp = () => { if (this.resizing) this._end(); };\n        this._handleEls.forEach(h => h.addEventListener('mousedown', this._onDown));\n        document.addEventListener('mousemove', this._onMove);\n        document.addEventListener('mouseup', this._onUp);\n    }\n\n    _unbind() {\n        this._handleEls.forEach(h => h.removeEventListener('mousedown', this._onDown));\n        document.removeEventListener('mousemove', this._onMove);\n        document.removeEventListener('mouseup', this._onUp);\n    }\n\n    _start(handle, x, y) {\n        this.resizing = true;\n        this._h = handle;\n        this._sx = x; this._sy = y;\n        const r = this.el.getBoundingClientRect();\n        this._sw = r.width; this._sh = r.height;\n    }\n\n    _update(x, y) {\n        const dx = x - this._sx, dy = y - this._sy;\n        let w = this._sw, h = this._sh;\n        if (this._h.includes('e')) w = this._sw + dx;\n        if (this._h.includes('w')) w = this._sw - dx;\n        if (this._h.includes('s')) h = this._sh + dy;\n        if (this._h.includes('n')) h = this._sh - dy;\n        const c = this.config;\n        w = Math.max(c.minWidth || 0, Math.min(c.maxWidth || Infinity, w));\n        h = Math.max(c.minHeight || 0, Math.min(c.maxHeight || Infinity, h));\n        this.el.style.width = w + 'px';\n        this.el.style.height = h + 'px';\n    }\n\n    _end() {\n        this.resizing = false;\n        const r = this.el.getBoundingClientRect();\n        this.pushEvent('resize', { width: Math.round(r.width), height: Math.round(r.height) });\n    }\n}\n", "/**\n * Tooltip Hook\n *\n * Simple tooltip display on hover.\n */\n\nexport class TooltipHook {\n    mounted(el, config, pushEvent) {\n        this.el = el;\n        this.config = config;\n        this.tooltip = null;\n\n        this.content = config.content || '';\n        this.placement = config.placement || 'top';\n        this.delay = config.delay || 200;\n\n        this._bindEvents();\n    }\n\n    updated(el, config, pushEvent) {\n        this.content = config.content || '';\n        this.placement = config.placement || 'top';\n\n        if (this.tooltip) {\n            this.tooltip.textContent = this.content;\n        }\n    }\n\n    destroyed(el) {\n        this._unbindEvents();\n        this._hideTooltip();\n    }\n\n    _bindEvents() {\n        this._onMouseEnter = this._handleMouseEnter.bind(this);\n        this._onMouseLeave = this._handleMouseLeave.bind(this);\n\n        this.el.addEventListener('mouseenter', this._onMouseEnter);\n        this.el.addEventListener('mouseleave', this._onMouseLeave);\n    }\n\n    _unbindEvents() {\n        this.el.removeEventListener('mouseenter', this._onMouseEnter);\n        this.el.removeEventListener('mouseleave', this._onMouseLeave);\n    }\n\n    _handleMouseEnter() {\n        this._showTimer = setTimeout(() => {\n            this._showTooltip();\n        }, this.delay);\n    }\n\n    _handleMouseLeave() {\n        clearTimeout(this._showTimer);\n        this._hideTooltip();\n    }\n\n    _showTooltip() {\n        if (!this.content) return;\n\n        // Create tooltip element\n        this.tooltip = document.createElement('div');\n        this.tooltip.className = 'vango-tooltip';\n        this.tooltip.textContent = this.content;\n        this.tooltip.style.cssText = `\n            position: fixed;\n            z-index: 10000;\n            padding: 4px 8px;\n            background: #333;\n            color: white;\n            border-radius: 4px;\n            font-size: 12px;\n            pointer-events: none;\n            white-space: nowrap;\n        `;\n\n        document.body.appendChild(this.tooltip);\n\n        // Position after adding to DOM (so we can get dimensions)\n        this._position();\n    }\n\n    _position() {\n        if (!this.tooltip) return;\n\n        const rect = this.el.getBoundingClientRect();\n        const tipRect = this.tooltip.getBoundingClientRect();\n\n        let top, left;\n\n        switch (this.placement) {\n            case 'top':\n                top = rect.top - tipRect.height - 8;\n                left = rect.left + (rect.width - tipRect.width) / 2;\n                break;\n            case 'bottom':\n                top = rect.bottom + 8;\n                left = rect.left + (rect.width - tipRect.width) / 2;\n                break;\n            case 'left':\n                top = rect.top + (rect.height - tipRect.height) / 2;\n                left = rect.left - tipRect.width - 8;\n                break;\n            case 'right':\n                top = rect.top + (rect.height - tipRect.height) / 2;\n                left = rect.right + 8;\n                break;\n            default:\n                top = rect.top - tipRect.height - 8;\n                left = rect.left + (rect.width - tipRect.width) / 2;\n        }\n\n        this.tooltip.style.top = `${top}px`;\n        this.tooltip.style.left = `${left}px`;\n    }\n\n    _hideTooltip() {\n        if (this.tooltip) {\n            this.tooltip.remove();\n            this.tooltip = null;\n        }\n    }\n}\n", "/**\n * Dropdown Hook\n *\n * Provides click-outside-to-close behavior for dropdowns/modals.\n */\n\nexport class DropdownHook {\n    mounted(el, config, pushEvent) {\n        this.el = el;\n        this.config = config;\n        this.pushEvent = pushEvent;\n\n        this.closeOnEscape = config.closeOnEscape !== false;\n        this.closeOnClickOutside = config.closeOnClickOutside !== false;\n\n        this._bindEvents();\n    }\n\n    updated(el, config, pushEvent) {\n        this.config = config;\n        this.pushEvent = pushEvent;\n    }\n\n    destroyed(el) {\n        this._unbindEvents();\n    }\n\n    _bindEvents() {\n        this._onClickOutside = this._handleClickOutside.bind(this);\n        this._onKeyDown = this._handleKeyDown.bind(this);\n\n        // Delay to avoid immediate trigger from the click that opened the dropdown\n        setTimeout(() => {\n            document.addEventListener('click', this._onClickOutside);\n            document.addEventListener('keydown', this._onKeyDown);\n        }, 0);\n    }\n\n    _unbindEvents() {\n        document.removeEventListener('click', this._onClickOutside);\n        document.removeEventListener('keydown', this._onKeyDown);\n    }\n\n    _handleClickOutside(e) {\n        if (!this.closeOnClickOutside) return;\n\n        if (!this.el.contains(e.target)) {\n            this.pushEvent('close', {});\n        }\n    }\n\n    _handleKeyDown(e) {\n        if (!this.closeOnEscape) return;\n\n        if (e.key === 'Escape') {\n            e.preventDefault();\n            this.pushEvent('close', {});\n        }\n    }\n}\n", "/**\n * Collapsible Hook - Expand/Collapse Animation\n *\n * Provides smooth height animation. Fires 'toggle' event when state changes.\n * Config: open (default: false), duration (default: 200ms)\n */\n\nexport class CollapsibleHook {\n    mounted(el, config, pushEvent) {\n        this.el = el;\n        this.config = config;\n        this.pushEvent = pushEvent;\n        this.duration = config.duration || 200;\n        this.isOpen = !!config.open;\n        this.animating = false;\n\n        if (!this.isOpen) {\n            el.style.height = '0';\n            el.style.overflow = 'hidden';\n        }\n    }\n\n    updated(el, config, pushEvent) {\n        this.pushEvent = pushEvent;\n        this.duration = config.duration || 200;\n        const newOpen = !!config.open;\n        if (newOpen !== this.isOpen) {\n            newOpen ? this._expand() : this._collapse();\n        }\n    }\n\n    destroyed() {}\n\n    _expand() {\n        if (this.animating || this.isOpen) return;\n        this.animating = true;\n        this.isOpen = true;\n\n        const el = this.el;\n        el.style.height = 'auto';\n        const h = el.scrollHeight;\n        el.style.height = '0';\n        el.style.overflow = 'hidden';\n        el.offsetHeight; // reflow\n        el.style.transition = `height ${this.duration}ms ease`;\n        el.style.height = h + 'px';\n\n        setTimeout(() => {\n            el.style.transition = '';\n            el.style.height = 'auto';\n            el.style.overflow = '';\n            this.animating = false;\n            this.pushEvent('toggle', { open: true });\n        }, this.duration);\n    }\n\n    _collapse() {\n        if (this.animating || !this.isOpen) return;\n        this.animating = true;\n        this.isOpen = false;\n\n        const el = this.el;\n        el.style.height = el.scrollHeight + 'px';\n        el.style.overflow = 'hidden';\n        el.offsetHeight; // reflow\n        el.style.transition = `height ${this.duration}ms ease`;\n        el.style.height = '0';\n\n        setTimeout(() => {\n            el.style.transition = '';\n            this.animating = false;\n            this.pushEvent('toggle', { open: false });\n        }, this.duration);\n    }\n}\n", "/**\n * FocusTrap Hook - Modal Accessibility\n *\n * Constrains keyboard navigation (Tab/Shift+Tab) to a specific container.\n * Critical for Modal/Dialog accessibility compliance (WCAG 2.1).\n *\n * VangoUI Integration: Used internally by ui.Dialog and ui.Modal components.\n */\n\nexport class FocusTrapHook {\n    mounted(el, config, pushEvent) {\n        this.el = el;\n        this.pushEvent = pushEvent;\n        this.active = config.active !== false;\n\n        // Save previously focused element to restore later\n        this.restoreFocusTo = document.activeElement;\n\n        this._onKeyDown = this._handleKeyDown.bind(this);\n        this.el.addEventListener('keydown', this._onKeyDown);\n\n        if (this.active) {\n            this._focusFirst();\n        }\n    }\n\n    updated(el, config, pushEvent) {\n        this.active = config.active !== false;\n        this.pushEvent = pushEvent;\n    }\n\n    destroyed(el) {\n        this.el.removeEventListener('keydown', this._onKeyDown);\n\n        // Restore focus on close\n        if (this.restoreFocusTo && typeof this.restoreFocusTo.focus === 'function') {\n            this.restoreFocusTo.focus();\n        }\n    }\n\n    _handleKeyDown(e) {\n        if (!this.active || e.key !== 'Tab') return;\n\n        const focusable = this._getFocusableElements();\n\n        if (focusable.length === 0) {\n            e.preventDefault();\n            return;\n        }\n\n        const first = focusable[0];\n        const last = focusable[focusable.length - 1];\n\n        if (e.shiftKey) {\n            // Shift + Tab\n            if (document.activeElement === first) {\n                e.preventDefault();\n                last.focus();\n            }\n        } else {\n            // Tab\n            if (document.activeElement === last) {\n                e.preventDefault();\n                first.focus();\n            }\n        }\n    }\n\n    _focusFirst() {\n        const focusable = this._getFocusableElements();\n        if (focusable.length > 0) {\n            focusable[0].focus();\n        } else {\n            // Fallback: focus container itself with tabindex\n            this.el.setAttribute('tabindex', '-1');\n            this.el.focus();\n        }\n    }\n\n    _getFocusableElements() {\n        return this.el.querySelectorAll(\n            'button:not([disabled]), ' +\n            '[href], ' +\n            'input:not([disabled]), ' +\n            'select:not([disabled]), ' +\n            'textarea:not([disabled]), ' +\n            '[tabindex]:not([tabindex=\"-1\"])'\n        );\n    }\n}\n", "/**\n * Portal Hook - DOM Element Repositioning\n *\n * Moves the DOM element to the end of document.body to escape\n * overflow: hidden containers and ensure correct z-index stacking context.\n *\n * VangoUI Integration: Used internally by ui.Dialog, ui.Tooltip, ui.Popover.\n */\n\nexport class PortalHook {\n    mounted(el, config, pushEvent) {\n        this.el = el;\n        this.pushEvent = pushEvent;\n        this.target = config.target || 'body';\n\n        // Create placeholder to keep VNode tree structure aligned\n        this.placeholder = document.createComment('portal-placeholder');\n\n        // Insert placeholder before moving (only if has parent)\n        if (el.parentNode) {\n            el.parentNode.insertBefore(this.placeholder, el);\n        }\n\n        // Get or create portal container\n        let portalRoot = document.getElementById('vango-portal-root');\n        if (!portalRoot) {\n            portalRoot = document.createElement('div');\n            portalRoot.id = 'vango-portal-root';\n            portalRoot.style.cssText = 'position: relative; z-index: 9999;';\n            document.body.appendChild(portalRoot);\n        }\n\n        // Move element to portal\n        portalRoot.appendChild(el);\n    }\n\n    updated(el, config, pushEvent) {\n        this.pushEvent = pushEvent;\n    }\n\n    destroyed(el) {\n        // Move back before destruction (optional, but good for cleanup)\n        if (this.placeholder && this.placeholder.parentNode) {\n            this.placeholder.parentNode.insertBefore(this.el, this.placeholder);\n            this.placeholder.remove();\n        }\n    }\n}\n\n/**\n * Create portal root element on DOM ready.\n * Called from client init to ensure portal root exists early.\n */\nexport function ensurePortalRoot() {\n    if (typeof document === 'undefined') return;\n\n    let portalRoot = document.getElementById('vango-portal-root');\n    if (!portalRoot) {\n        portalRoot = document.createElement('div');\n        portalRoot.id = 'vango-portal-root';\n        portalRoot.style.cssText = 'position: relative; z-index: 9999;';\n        document.body.appendChild(portalRoot);\n    }\n    return portalRoot;\n}\n", "/**\n * Dialog Hook - Modal Dialog Behavior\n *\n * Provides focus trapping, escape key handling, and click-outside closing\n * for modal dialogs. Integrates with the FocusTrap hook for accessibility.\n *\n * Config options:\n * - closeOnEscape: boolean (default: true) - Close on Escape key\n * - closeOnOutside: boolean (default: true) - Close on click outside\n * - initialFocus: string (optional) - CSS selector for initial focus element\n */\n\nexport class DialogHook {\n    mounted(el, config, pushEvent) {\n        this.el = el;\n        this.config = config;\n        this.pushEvent = pushEvent;\n\n        // Store previously focused element\n        this.previousFocus = document.activeElement;\n\n        // Setup event handlers\n        this._onKeyDown = this._handleKeyDown.bind(this);\n        this._onClick = this._handleClick.bind(this);\n\n        document.addEventListener('keydown', this._onKeyDown);\n\n        if (config.closeOnOutside !== false) {\n            // Use setTimeout to avoid immediate trigger from the opening click\n            setTimeout(() => {\n                document.addEventListener('click', this._onClick);\n            }, 0);\n        }\n\n        // Focus management\n        this._focusFirst();\n\n        // Prevent body scroll\n        this._originalOverflow = document.body.style.overflow;\n        document.body.style.overflow = 'hidden';\n    }\n\n    updated(el, config, pushEvent) {\n        this.config = config;\n        this.pushEvent = pushEvent;\n    }\n\n    destroyed(el) {\n        document.removeEventListener('keydown', this._onKeyDown);\n        document.removeEventListener('click', this._onClick);\n\n        // Restore body scroll\n        document.body.style.overflow = this._originalOverflow || '';\n\n        // Restore focus\n        if (this.previousFocus && typeof this.previousFocus.focus === 'function') {\n            this.previousFocus.focus();\n        }\n    }\n\n    _handleKeyDown(e) {\n        if (e.key === 'Escape' && this.config.closeOnEscape !== false) {\n            e.preventDefault();\n            this.pushEvent('close', {});\n            return;\n        }\n\n        // Focus trapping\n        if (e.key === 'Tab') {\n            this._trapFocus(e);\n        }\n    }\n\n    _handleClick(e) {\n        // Check if click is outside the dialog content\n        if (!this.el.contains(e.target)) {\n            this.pushEvent('close', {});\n        }\n    }\n\n    _focusFirst() {\n        // Try initial focus element first\n        if (this.config.initialFocus) {\n            const initial = this.el.querySelector(this.config.initialFocus);\n            if (initial) {\n                initial.focus();\n                return;\n            }\n        }\n\n        // Find first focusable element\n        const focusable = this._getFocusableElements();\n        if (focusable.length > 0) {\n            focusable[0].focus();\n        } else {\n            // Fallback: make container focusable\n            this.el.setAttribute('tabindex', '-1');\n            this.el.focus();\n        }\n    }\n\n    _trapFocus(e) {\n        const focusable = this._getFocusableElements();\n\n        if (focusable.length === 0) {\n            e.preventDefault();\n            return;\n        }\n\n        const first = focusable[0];\n        const last = focusable[focusable.length - 1];\n\n        if (e.shiftKey) {\n            // Shift + Tab\n            if (document.activeElement === first) {\n                e.preventDefault();\n                last.focus();\n            }\n        } else {\n            // Tab\n            if (document.activeElement === last) {\n                e.preventDefault();\n                first.focus();\n            }\n        }\n    }\n\n    _getFocusableElements() {\n        return this.el.querySelectorAll(\n            'button:not([disabled]), ' +\n            '[href], ' +\n            'input:not([disabled]), ' +\n            'select:not([disabled]), ' +\n            'textarea:not([disabled]), ' +\n            '[tabindex]:not([tabindex=\"-1\"])'\n        );\n    }\n}\n", "/**\n * Popover Hook - Floating Content Positioning\n *\n * Handles positioning and click-outside closing for popovers.\n * Automatically repositions when viewport edge is reached.\n *\n * Config options:\n * - closeOnEscape: boolean (default: true) - Close on Escape key\n * - closeOnOutside: boolean (default: true) - Close on click outside\n * - side: string (default: 'bottom') - Preferred side (top, right, bottom, left)\n * - align: string (default: 'center') - Alignment (start, center, end)\n * - offset: number (default: 4) - Gap between trigger and content in pixels\n */\n\nexport class PopoverHook {\n    mounted(el, config, pushEvent) {\n        this.el = el;\n        this.config = config;\n        this.pushEvent = pushEvent;\n\n        // Find trigger and content elements\n        this.trigger = el.querySelector('[data-popover-trigger]');\n        this.content = el.querySelector('[data-popover-content]');\n\n        if (!this.content) {\n            // If no explicit content marker, assume the hook element is the content\n            this.content = el;\n        }\n\n        // Setup event handlers\n        this._onKeyDown = this._handleKeyDown.bind(this);\n        this._onClick = this._handleClick.bind(this);\n        this._onScroll = this._handleScroll.bind(this);\n        this._onResize = this._handleResize.bind(this);\n\n        document.addEventListener('keydown', this._onKeyDown);\n\n        if (config.closeOnOutside !== false) {\n            setTimeout(() => {\n                document.addEventListener('click', this._onClick);\n            }, 0);\n        }\n\n        // Position tracking\n        window.addEventListener('scroll', this._onScroll, true);\n        window.addEventListener('resize', this._onResize);\n\n        // Initial positioning\n        this._position();\n    }\n\n    updated(el, config, pushEvent) {\n        this.config = config;\n        this.pushEvent = pushEvent;\n        this._position();\n    }\n\n    destroyed(el) {\n        document.removeEventListener('keydown', this._onKeyDown);\n        document.removeEventListener('click', this._onClick);\n        window.removeEventListener('scroll', this._onScroll, true);\n        window.removeEventListener('resize', this._onResize);\n    }\n\n    _handleKeyDown(e) {\n        if (e.key === 'Escape' && this.config.closeOnEscape !== false) {\n            e.preventDefault();\n            this.pushEvent('close', {});\n        }\n    }\n\n    _handleClick(e) {\n        if (!this.el.contains(e.target)) {\n            this.pushEvent('close', {});\n        }\n    }\n\n    _handleScroll() {\n        this._position();\n    }\n\n    _handleResize() {\n        this._position();\n    }\n\n    _position() {\n        if (!this.trigger || !this.content) return;\n\n        const triggerRect = this.trigger.getBoundingClientRect();\n        const contentRect = this.content.getBoundingClientRect();\n        const offset = this.config.offset || 4;\n\n        let side = this.config.side || 'bottom';\n        let align = this.config.align || 'center';\n\n        // Calculate position based on side\n        let top, left;\n\n        switch (side) {\n            case 'top':\n                top = triggerRect.top - contentRect.height - offset;\n                // Flip if would overflow\n                if (top < 0) {\n                    top = triggerRect.bottom + offset;\n                    side = 'bottom';\n                }\n                break;\n            case 'bottom':\n                top = triggerRect.bottom + offset;\n                // Flip if would overflow\n                if (top + contentRect.height > window.innerHeight) {\n                    top = triggerRect.top - contentRect.height - offset;\n                    side = 'top';\n                }\n                break;\n            case 'left':\n                left = triggerRect.left - contentRect.width - offset;\n                // Flip if would overflow\n                if (left < 0) {\n                    left = triggerRect.right + offset;\n                    side = 'right';\n                }\n                break;\n            case 'right':\n                left = triggerRect.right + offset;\n                // Flip if would overflow\n                if (left + contentRect.width > window.innerWidth) {\n                    left = triggerRect.left - contentRect.width - offset;\n                    side = 'left';\n                }\n                break;\n        }\n\n        // Calculate alignment for horizontal sides (top/bottom)\n        if (side === 'top' || side === 'bottom') {\n            switch (align) {\n                case 'start':\n                    left = triggerRect.left;\n                    break;\n                case 'center':\n                    left = triggerRect.left + (triggerRect.width - contentRect.width) / 2;\n                    break;\n                case 'end':\n                    left = triggerRect.right - contentRect.width;\n                    break;\n            }\n\n            // Ensure doesn't overflow horizontally\n            if (left < 0) left = 0;\n            if (left + contentRect.width > window.innerWidth) {\n                left = window.innerWidth - contentRect.width;\n            }\n        }\n\n        // Calculate alignment for vertical sides (left/right)\n        if (side === 'left' || side === 'right') {\n            switch (align) {\n                case 'start':\n                    top = triggerRect.top;\n                    break;\n                case 'center':\n                    top = triggerRect.top + (triggerRect.height - contentRect.height) / 2;\n                    break;\n                case 'end':\n                    top = triggerRect.bottom - contentRect.height;\n                    break;\n            }\n\n            // Ensure doesn't overflow vertically\n            if (top < 0) top = 0;\n            if (top + contentRect.height > window.innerHeight) {\n                top = window.innerHeight - contentRect.height;\n            }\n        }\n\n        // Apply position\n        this.content.style.position = 'fixed';\n        this.content.style.top = `${top}px`;\n        this.content.style.left = `${left}px`;\n\n        // Update data-side attribute for styling\n        this.content.dataset.side = side;\n    }\n}\n", "/**\n * Client Hook Lifecycle Management\n *\n * Manages hooks - JavaScript behavior attached to elements that need\n * to run on the client (like sorting, tooltips, dropdowns).\n */\n\nimport { SortableHook } from './sortable.js';\nimport { DraggableHook } from './draggable.js';\nimport { DroppableHook } from './droppable.js';\nimport { ResizableHook } from './resizable.js';\nimport { TooltipHook } from './tooltip.js';\nimport { DropdownHook } from './dropdown.js';\nimport { CollapsibleHook } from './collapsible.js';\nimport { FocusTrapHook } from './focustrap.js';\nimport { PortalHook } from './portal.js';\nimport { DialogHook } from './dialog.js';\nimport { PopoverHook } from './popover.js';\n\nexport class HookManager {\n    constructor(client) {\n        this.client = client;\n        this.instances = new Map(); // hid -> { hook, instance, el }\n        this.pendingReverts = new Map(); // hid -> revertFn\n\n        // Register standard hooks (Section 8.4 of spec)\n        this.hooks = {\n            'Sortable': SortableHook,\n            'Draggable': DraggableHook,\n            'Droppable': DroppableHook,\n            'Resizable': ResizableHook,\n            'Tooltip': TooltipHook,\n            'Dropdown': DropdownHook,\n            'Collapsible': CollapsibleHook,\n            // VangoUI helper hooks\n            'FocusTrap': FocusTrapHook,\n            'Portal': PortalHook,\n            'Dialog': DialogHook,\n            'Popover': PopoverHook,\n        };\n\n        // Listen for revert events from server\n        document.addEventListener('vango:hook-revert', (e) => {\n            const hid = e.detail?.hid;\n            if (hid && this.pendingReverts.has(hid)) {\n                const revertFn = this.pendingReverts.get(hid);\n                if (typeof revertFn === 'function') {\n                    revertFn();\n                }\n                this.pendingReverts.delete(hid);\n            }\n        });\n    }\n\n    /**\n     * Register a custom hook\n     */\n    register(name, hookClass) {\n        this.hooks[name] = hookClass;\n    }\n\n    /**\n     * Initialize hooks from current DOM\n     */\n    initializeFromDOM() {\n        document.querySelectorAll('[data-hook]').forEach(el => {\n            this.initializeForNode(el);\n        });\n    }\n\n    /**\n     * Update hooks after DOM changes\n     */\n    updateFromDOM() {\n        // Initialize any new hooks\n        document.querySelectorAll('[data-hook]').forEach(el => {\n            const hid = el.dataset.hid;\n            if (hid && !this.instances.has(hid)) {\n                this.initializeForNode(el);\n            }\n        });\n    }\n\n    /**\n     * Initialize hook for a specific node\n     */\n    initializeForNode(el) {\n        const hookName = el.dataset.hook;\n        if (!hookName) return;\n\n        const HookClass = this.hooks[hookName];\n        if (!HookClass) {\n            if (this.client.options.debug) {\n                console.warn('[Vango] Unknown hook:', hookName);\n            }\n            return;\n        }\n\n        const hid = el.dataset.hid;\n        if (!hid) {\n            if (this.client.options.debug) {\n                console.warn('[Vango] Hook element must have data-hid');\n            }\n            return;\n        }\n\n        // Already initialized\n        if (this.instances.has(hid)) {\n            return;\n        }\n\n        // Parse config from data-hook-config\n        let config = {};\n        try {\n            if (el.dataset.hookConfig) {\n                config = JSON.parse(el.dataset.hookConfig);\n            }\n        } catch (e) {\n            if (this.client.options.debug) {\n                console.warn('[Vango] Invalid hook config:', e);\n            }\n        }\n\n        // Create push event function with optional revert callback\n        const pushEvent = (eventName, data = {}, revertFn = null) => {\n            // Store revert callback if provided\n            if (typeof revertFn === 'function') {\n                this.pendingReverts.set(hid, revertFn);\n            }\n            this.client.sendHookEvent(hid, eventName, data);\n        };\n\n        // Instantiate and mount\n        const instance = new HookClass();\n        instance.mounted(el, config, pushEvent);\n\n        this.instances.set(hid, { hook: HookClass, instance, el });\n    }\n\n    /**\n     * Destroy hook for a specific node\n     */\n    destroyForNode(el) {\n        const hid = el.dataset?.hid;\n        if (!hid) return;\n\n        const entry = this.instances.get(hid);\n        if (entry) {\n            if (entry.instance.destroyed) {\n                entry.instance.destroyed(entry.el);\n            }\n            this.instances.delete(hid);\n        }\n    }\n\n    /**\n     * Destroy all hooks\n     */\n    destroyAll() {\n        for (const [hid, entry] of this.instances) {\n            if (entry.instance.destroyed) {\n                entry.instance.destroyed(entry.el);\n            }\n        }\n        this.instances.clear();\n    }\n\n    /**\n     * Update hook config\n     */\n    updateConfig(hid, config) {\n        const entry = this.instances.get(hid);\n        if (entry && entry.instance.updated) {\n            const pushEvent = (eventName, data = {}, revertFn = null) => {\n                if (typeof revertFn === 'function') {\n                    this.pendingReverts.set(hid, revertFn);\n                }\n                this.client.sendHookEvent(hid, eventName, data);\n            };\n            entry.instance.updated(entry.el, config, pushEvent);\n        }\n    }\n}\n", "/**\n * Connection State Manager\n *\n * Manages connection state, CSS classes, and optional toast notifications.\n * Provides visual feedback to users during connection interruptions.\n */\n\n/**\n * Connection states\n */\nexport const ConnectionState = {\n    CONNECTING: 'connecting',\n    CONNECTED: 'connected',\n    RECONNECTING: 'reconnecting',\n    DISCONNECTED: 'disconnected',\n};\n\n/**\n * CSS classes applied to document.documentElement (<html>)\n */\nconst CSS_CLASSES = {\n    [ConnectionState.CONNECTING]: 'vango-connecting',\n    [ConnectionState.CONNECTED]: 'vango-connected',\n    [ConnectionState.RECONNECTING]: 'vango-reconnecting',\n    [ConnectionState.DISCONNECTED]: 'vango-disconnected',\n};\n\n/**\n * ConnectionManager handles connection state and user feedback.\n */\nexport class ConnectionManager {\n    constructor(options = {}) {\n        this.options = {\n            // Toast settings\n            toastOnReconnect: options.toastOnReconnect || false,\n            toastMessage: options.toastMessage || 'Connection restored',\n            toastDuration: options.toastDuration || 3000,\n\n            // Reconnection settings\n            maxRetries: options.maxRetries || 10,\n            baseDelay: options.baseDelay || 1000,\n            maxDelay: options.maxDelay || 30000,\n\n            // Debug mode\n            debug: options.debug || false,\n\n            ...options,\n        };\n\n        this.state = ConnectionState.CONNECTING;\n        this.retryCount = 0;\n        this.previousState = null;\n\n        // Apply initial connecting state\n        this._updateClasses();\n    }\n\n    /**\n     * Set connection state and update UI\n     */\n    setState(newState) {\n        if (this.state === newState) return;\n\n        this.previousState = this.state;\n        this.state = newState;\n\n        // Update body classes\n        this._updateClasses();\n\n        // Dispatch custom event\n        this._dispatchEvent(newState, this.previousState);\n\n        // Show toast on reconnection\n        if (this.options.toastOnReconnect &&\n            newState === ConnectionState.CONNECTED &&\n            this.previousState !== ConnectionState.CONNECTED) {\n            this.showToast(this.options.toastMessage);\n        }\n\n        if (this.options.debug) {\n            console.log(`[Vango] Connection state: ${this.previousState} -> ${newState}`);\n        }\n    }\n\n    /**\n     * Update CSS classes on document.documentElement (<html>)\n     */\n    _updateClasses() {\n        const root = document.documentElement;\n\n        // Remove all connection state classes\n        Object.values(CSS_CLASSES).forEach(cls => {\n            root.classList.remove(cls);\n        });\n\n        // Add current state class\n        const currentClass = CSS_CLASSES[this.state];\n        if (currentClass) {\n            root.classList.add(currentClass);\n        }\n    }\n\n    /**\n     * Dispatch custom event for connection state changes\n     */\n    _dispatchEvent(state, previousState) {\n        const event = new CustomEvent('vango:connection', {\n            detail: { state, previousState },\n            bubbles: true,\n        });\n        document.dispatchEvent(event);\n    }\n\n    /**\n     * Handle connection established\n     */\n    onConnect() {\n        this.retryCount = 0;\n        this.setState(ConnectionState.CONNECTED);\n    }\n\n    /**\n     * Handle connection lost\n     */\n    onDisconnect() {\n        if (this.state === ConnectionState.CONNECTED) {\n            this.setState(ConnectionState.RECONNECTING);\n        }\n    }\n\n    /**\n     * Handle failed reconnection attempt\n     */\n    onReconnectFailed() {\n        this.retryCount++;\n\n        if (this.retryCount >= this.options.maxRetries) {\n            this.setState(ConnectionState.DISCONNECTED);\n            return false; // Stop retrying\n        }\n\n        return true; // Continue retrying\n    }\n\n    /**\n     * Calculate next retry delay with exponential backoff\n     */\n    getNextRetryDelay() {\n        const delay = Math.min(\n            this.options.baseDelay * Math.pow(2, this.retryCount),\n            this.options.maxDelay\n        );\n        return delay;\n    }\n\n    /**\n     * Get current state\n     */\n    getState() {\n        return this.state;\n    }\n\n    /**\n     * Check if currently connected\n     */\n    isConnected() {\n        return this.state === ConnectionState.CONNECTED;\n    }\n\n    /**\n     * Check if disconnected (gave up reconnecting)\n     */\n    isDisconnected() {\n        return this.state === ConnectionState.DISCONNECTED;\n    }\n\n    /**\n     * Reset state (e.g., for manual retry)\n     */\n    reset() {\n        this.retryCount = 0;\n        this.setState(ConnectionState.CONNECTED);\n    }\n\n    /**\n     * Show a toast notification\n     */\n    showToast(message, duration = this.options.toastDuration) {\n        // Check if custom toast handler is defined\n        if (typeof window.__VANGO_TOAST__ === 'function') {\n            window.__VANGO_TOAST__(message, duration);\n            return;\n        }\n\n        // Create simple toast element\n        const toast = document.createElement('div');\n        toast.className = 'vango-toast';\n        toast.textContent = message;\n        toast.setAttribute('role', 'alert');\n        toast.setAttribute('aria-live', 'polite');\n\n        // Apply styles\n        Object.assign(toast.style, {\n            position: 'fixed',\n            bottom: '20px',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            padding: '12px 24px',\n            backgroundColor: 'hsl(var(--primary, 220 13% 18%))',\n            color: 'hsl(var(--primary-foreground, 0 0% 100%))',\n            borderRadius: 'var(--radius, 6px)',\n            boxShadow: '0 4px 12px rgba(0, 0, 0, 0.15)',\n            zIndex: '10001',\n            opacity: '0',\n            transition: 'opacity 0.3s ease',\n            fontFamily: 'system-ui, -apple-system, sans-serif',\n            fontSize: '14px',\n        });\n\n        document.body.appendChild(toast);\n\n        // Animate in\n        requestAnimationFrame(() => {\n            toast.style.opacity = '1';\n        });\n\n        // Remove after duration\n        setTimeout(() => {\n            toast.style.opacity = '0';\n            setTimeout(() => {\n                if (toast.parentNode) {\n                    toast.parentNode.removeChild(toast);\n                }\n            }, 300);\n        }, duration);\n    }\n}\n\n/**\n * Inject default reconnection styles\n * These can be overridden by the application's CSS\n */\nexport function injectDefaultStyles() {\n    // Check if styles already injected\n    if (document.getElementById('vango-connection-styles')) {\n        return;\n    }\n\n    const style = document.createElement('style');\n    style.id = 'vango-connection-styles';\n    style.textContent = `\n        /* Vango Connection State Styles */\n\n        /* Connecting indicator - pulsing bar at top */\n        html.vango-connecting::after {\n            content: '';\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            height: 3px;\n            background: linear-gradient(90deg, transparent, var(--vango-primary, #3b82f6), transparent);\n            animation: vango-connect-pulse 1.5s ease-in-out infinite;\n            z-index: 9999;\n        }\n\n        @keyframes vango-connect-pulse {\n            0%, 100% { opacity: 0.3; }\n            50% { opacity: 1; }\n        }\n\n        /* Reconnecting indicator - pulsing bar at top */\n        html.vango-reconnecting::after {\n            content: '';\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            height: 3px;\n            background: linear-gradient(90deg, transparent, var(--vango-primary, #3b82f6), transparent);\n            animation: vango-reconnect-pulse 1.5s ease-in-out infinite;\n            z-index: 9999;\n        }\n\n        @keyframes vango-reconnect-pulse {\n            0%, 100% { opacity: 0.3; }\n            50% { opacity: 1; }\n        }\n\n        /* Disconnected state - slight grayscale and overlay */\n        html.vango-disconnected {\n            filter: grayscale(0.3);\n        }\n\n        html.vango-disconnected::before {\n            content: 'Connection lost. Click to retry...';\n            position: fixed;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            background: hsl(var(--background, 0 0% 100%));\n            border: 1px solid hsl(var(--border, 0 0% 90%));\n            padding: 16px 32px;\n            border-radius: var(--radius, 6px);\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n            z-index: 10000;\n            font-family: system-ui, -apple-system, sans-serif;\n            font-size: 14px;\n            color: hsl(var(--foreground, 0 0% 9%));\n            cursor: pointer;\n        }\n\n        /* Toast notifications */\n        .vango-toast {\n            animation: vango-toast-slide-up 0.3s ease-out;\n        }\n\n        @keyframes vango-toast-slide-up {\n            from {\n                transform: translateX(-50%) translateY(20px);\n                opacity: 0;\n            }\n            to {\n                transform: translateX(-50%) translateY(0);\n                opacity: 1;\n            }\n        }\n    `;\n\n    document.head.appendChild(style);\n}\n\n/**\n * Default export for convenience\n */\nexport default ConnectionManager;\n", "/**\n * URL Manager\n *\n * Handles URL query parameter updates from server patches.\n * Supports push/replace history modes.\n */\n\n/**\n * URLManager handles URL-related patches from the server.\n */\nexport class URLManager {\n    constructor(client, options = {}) {\n        this.client = client;\n        this.options = {\n            debug: options.debug || false,\n            ...options,\n        };\n\n        // Pending updates for debouncing (not used client-side, but structure matches server)\n        this.pending = new Map();\n    }\n\n    /**\n     * Apply a URL patch\n     * @param {Object} patch - The URL patch with op and params\n     */\n    applyPatch(patch) {\n        const { op, params } = patch;\n\n        if (!params || typeof params !== 'object') {\n            if (this.options.debug) {\n                console.warn('[Vango URL] Invalid params:', params);\n            }\n            return;\n        }\n\n        // Build new URL\n        const url = new URL(window.location);\n\n        // Apply param changes\n        for (const [key, value] of Object.entries(params)) {\n            if (value === '' || value === null || value === undefined) {\n                url.searchParams.delete(key);\n            } else {\n                url.searchParams.set(key, value);\n            }\n        }\n\n        // Determine mode from op\n        const isPush = op === 0x30; // PatchURLPush\n\n        if (this.options.debug) {\n            console.log('[Vango URL]', isPush ? 'Push' : 'Replace', url.toString());\n        }\n\n        // Update history\n        if (isPush) {\n            history.pushState(null, '', url.toString());\n        } else {\n            history.replaceState(null, '', url.toString());\n        }\n\n        // Dispatch custom event for app to listen\n        this._dispatchEvent(params, isPush);\n    }\n\n    /**\n     * Dispatch custom event for URL changes\n     */\n    _dispatchEvent(params, isPush) {\n        const event = new CustomEvent('vango:url', {\n            detail: {\n                params,\n                mode: isPush ? 'push' : 'replace',\n                url: window.location.href,\n            },\n            bubbles: true,\n        });\n        document.dispatchEvent(event);\n    }\n\n    /**\n     * Get current query parameters as an object\n     */\n    getParams() {\n        const params = {};\n        const searchParams = new URLSearchParams(window.location.search);\n        for (const [key, value] of searchParams) {\n            params[key] = value;\n        }\n        return params;\n    }\n\n    /**\n     * Get a specific query parameter\n     */\n    getParam(key) {\n        const searchParams = new URLSearchParams(window.location.search);\n        return searchParams.get(key);\n    }\n\n    /**\n     * Check if a query parameter exists\n     */\n    hasParam(key) {\n        const searchParams = new URLSearchParams(window.location.search);\n        return searchParams.has(key);\n    }\n}\n\n/**\n * Default export for convenience\n */\nexport default URLManager;\n", "/**\n * Preference Sync\n *\n * Client-side preference management with cross-tab sync via BroadcastChannel.\n * Works with both anonymous users (LocalStorage) and authenticated users (server sync).\n */\n\n/**\n * Merge strategies for conflict resolution\n */\nexport const MergeStrategy = {\n    DB_WINS: 0,      // Server value wins\n    LOCAL_WINS: 1,   // Local value wins\n    PROMPT: 2,       // Ask user to choose\n    LWW: 3,          // Last-write-wins by timestamp\n};\n\n/**\n * PrefManager handles preference persistence and cross-tab sync.\n */\nexport class PrefManager {\n    constructor(client, options = {}) {\n        this.client = client;\n        this.options = {\n            channelName: 'vango:prefs',\n            storagePrefix: 'vango_pref_',\n            debug: options.debug || false,\n            ...options,\n        };\n\n        // Registered preferences\n        this.prefs = new Map();\n\n        // BroadcastChannel for cross-tab sync\n        this.channel = null;\n        if (typeof BroadcastChannel !== 'undefined') {\n            this.channel = new BroadcastChannel(this.options.channelName);\n            this.channel.onmessage = (event) => this._handleBroadcast(event);\n        }\n\n        // Listen for storage events (fallback for browsers without BroadcastChannel)\n        if (typeof window !== 'undefined') {\n            window.addEventListener('storage', (event) => this._handleStorageEvent(event));\n        }\n    }\n\n    /**\n     * Register a preference\n     * @param {string} key - Unique preference key\n     * @param {*} defaultValue - Default value\n     * @param {Object} options - Configuration options\n     * @returns {Pref} Preference instance\n     */\n    register(key, defaultValue, options = {}) {\n        const pref = new Pref(this, key, defaultValue, options);\n        this.prefs.set(key, pref);\n\n        // Load from storage\n        pref._loadFromStorage();\n\n        return pref;\n    }\n\n    /**\n     * Get a registered preference\n     */\n    get(key) {\n        return this.prefs.get(key);\n    }\n\n    /**\n     * Broadcast a preference change to other tabs\n     */\n    broadcast(key, value, updatedAt) {\n        if (this.channel) {\n            this.channel.postMessage({\n                type: 'update',\n                key,\n                value,\n                updatedAt: updatedAt.toISOString(),\n            });\n        }\n    }\n\n    /**\n     * Handle broadcast message from another tab\n     */\n    _handleBroadcast(event) {\n        const { type, key, value, updatedAt } = event.data;\n\n        if (type === 'update') {\n            const pref = this.prefs.get(key);\n            if (pref) {\n                pref._setFromRemote(value, new Date(updatedAt));\n            }\n        }\n\n        if (this.options.debug) {\n            console.log('[Vango Prefs] Broadcast received:', event.data);\n        }\n    }\n\n    /**\n     * Handle storage event (fallback for cross-tab sync)\n     */\n    _handleStorageEvent(event) {\n        if (!event.key || !event.key.startsWith(this.options.storagePrefix)) {\n            return;\n        }\n\n        const prefKey = event.key.slice(this.options.storagePrefix.length);\n        const pref = this.prefs.get(prefKey);\n\n        if (pref && event.newValue) {\n            try {\n                const data = JSON.parse(event.newValue);\n                pref._setFromRemote(data.value, new Date(data.updatedAt));\n            } catch (e) {\n                if (this.options.debug) {\n                    console.warn('[Vango Prefs] Failed to parse storage event:', e);\n                }\n            }\n        }\n    }\n\n    /**\n     * Save to LocalStorage\n     */\n    saveToStorage(key, value, updatedAt) {\n        if (typeof localStorage === 'undefined') return;\n\n        const storageKey = this.options.storagePrefix + key;\n        const data = {\n            value,\n            updatedAt: updatedAt.toISOString(),\n        };\n\n        try {\n            localStorage.setItem(storageKey, JSON.stringify(data));\n        } catch (e) {\n            if (this.options.debug) {\n                console.warn('[Vango Prefs] Failed to save to storage:', e);\n            }\n        }\n    }\n\n    /**\n     * Load from LocalStorage\n     */\n    loadFromStorage(key) {\n        if (typeof localStorage === 'undefined') return null;\n\n        const storageKey = this.options.storagePrefix + key;\n        try {\n            const data = localStorage.getItem(storageKey);\n            if (data) {\n                const parsed = JSON.parse(data);\n                return {\n                    value: parsed.value,\n                    updatedAt: new Date(parsed.updatedAt),\n                };\n            }\n        } catch (e) {\n            if (this.options.debug) {\n                console.warn('[Vango Prefs] Failed to load from storage:', e);\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Remove from LocalStorage\n     */\n    removeFromStorage(key) {\n        if (typeof localStorage === 'undefined') return;\n\n        const storageKey = this.options.storagePrefix + key;\n        try {\n            localStorage.removeItem(storageKey);\n        } catch (e) {\n            // Ignore errors\n        }\n    }\n\n    /**\n     * Sync all preferences with server\n     * Called when user logs in\n     */\n    async syncWithServer(serverPrefs) {\n        for (const [key, serverData] of Object.entries(serverPrefs)) {\n            const pref = this.prefs.get(key);\n            if (pref) {\n                pref._mergeWithServer(serverData.value, new Date(serverData.updatedAt));\n            }\n        }\n    }\n\n    /**\n     * Get all preferences as an object for server sync\n     */\n    getAllForSync() {\n        const result = {};\n        for (const [key, pref] of this.prefs) {\n            if (pref.options.syncToServer !== false) {\n                result[key] = {\n                    value: pref.value,\n                    updatedAt: pref.updatedAt.toISOString(),\n                };\n            }\n        }\n        return result;\n    }\n\n    /**\n     * Cleanup\n     */\n    destroy() {\n        if (this.channel) {\n            this.channel.close();\n            this.channel = null;\n        }\n    }\n}\n\n/**\n * Individual preference instance\n */\nexport class Pref {\n    constructor(manager, key, defaultValue, options = {}) {\n        this.manager = manager;\n        this.key = key;\n        this.defaultValue = defaultValue;\n        this.value = defaultValue;\n        this.updatedAt = new Date();\n\n        this.options = {\n            mergeStrategy: MergeStrategy.LWW,\n            persistLocal: true,\n            syncToServer: true,\n            onConflict: null,  // Custom conflict handler\n            onChange: null,    // Called when value changes\n            ...options,\n        };\n\n        // Subscribers for reactive updates\n        this.subscribers = new Set();\n    }\n\n    /**\n     * Get the current value\n     */\n    get() {\n        return this.value;\n    }\n\n    /**\n     * Set a new value\n     */\n    set(value) {\n        if (this._isEqual(this.value, value)) {\n            return;\n        }\n\n        const oldValue = this.value;\n        this.value = value;\n        this.updatedAt = new Date();\n\n        // Persist locally\n        if (this.options.persistLocal) {\n            this.manager.saveToStorage(this.key, value, this.updatedAt);\n        }\n\n        // Broadcast to other tabs\n        this.manager.broadcast(this.key, value, this.updatedAt);\n\n        // Sync to server via client\n        if (this.options.syncToServer && this.manager.client) {\n            this._syncToServer();\n        }\n\n        // Notify subscribers\n        this._notifySubscribers(value, oldValue);\n\n        // Call onChange callback\n        if (this.options.onChange) {\n            this.options.onChange(value, oldValue);\n        }\n    }\n\n    /**\n     * Reset to default value\n     */\n    reset() {\n        this.set(this.defaultValue);\n    }\n\n    /**\n     * Subscribe to value changes\n     * @param {Function} callback - Called with (newValue, oldValue)\n     * @returns {Function} Unsubscribe function\n     */\n    subscribe(callback) {\n        this.subscribers.add(callback);\n        return () => this.subscribers.delete(callback);\n    }\n\n    /**\n     * Load initial value from storage\n     */\n    _loadFromStorage() {\n        const stored = this.manager.loadFromStorage(this.key);\n        if (stored) {\n            this.value = stored.value;\n            this.updatedAt = stored.updatedAt;\n        }\n    }\n\n    /**\n     * Set value from remote source (another tab)\n     */\n    _setFromRemote(value, remoteUpdatedAt) {\n        const resolved = this._resolveConflict(this.value, value, this.updatedAt, remoteUpdatedAt);\n\n        if (!this._isEqual(this.value, resolved)) {\n            const oldValue = this.value;\n            this.value = resolved;\n\n            // Update timestamp if remote was newer\n            if (remoteUpdatedAt > this.updatedAt) {\n                this.updatedAt = remoteUpdatedAt;\n            }\n\n            // Update storage\n            if (this.options.persistLocal) {\n                this.manager.saveToStorage(this.key, this.value, this.updatedAt);\n            }\n\n            // Notify subscribers\n            this._notifySubscribers(this.value, oldValue);\n\n            if (this.options.onChange) {\n                this.options.onChange(this.value, oldValue);\n            }\n        }\n    }\n\n    /**\n     * Merge with server value (called on login)\n     */\n    _mergeWithServer(serverValue, serverUpdatedAt) {\n        const resolved = this._resolveConflict(this.value, serverValue, this.updatedAt, serverUpdatedAt);\n\n        if (!this._isEqual(this.value, resolved)) {\n            const oldValue = this.value;\n            this.value = resolved;\n\n            // Use the more recent timestamp\n            if (serverUpdatedAt > this.updatedAt) {\n                this.updatedAt = serverUpdatedAt;\n            }\n\n            // Update storage\n            if (this.options.persistLocal) {\n                this.manager.saveToStorage(this.key, this.value, this.updatedAt);\n            }\n\n            // Notify subscribers\n            this._notifySubscribers(this.value, oldValue);\n\n            if (this.options.onChange) {\n                this.options.onChange(this.value, oldValue);\n            }\n        }\n    }\n\n    /**\n     * Resolve conflict between local and remote values\n     */\n    _resolveConflict(local, remote, localTime, remoteTime) {\n        // Custom handler takes precedence\n        if (this.options.onConflict) {\n            return this.options.onConflict(local, remote, localTime, remoteTime);\n        }\n\n        switch (this.options.mergeStrategy) {\n            case MergeStrategy.DB_WINS:\n                return remote;\n\n            case MergeStrategy.LOCAL_WINS:\n                return local;\n\n            case MergeStrategy.LWW:\n                return remoteTime > localTime ? remote : local;\n\n            case MergeStrategy.PROMPT:\n                // For PROMPT, we'd need to show UI to user\n                // For now, fall back to LWW\n                return remoteTime > localTime ? remote : local;\n\n            default:\n                return local;\n        }\n    }\n\n    /**\n     * Sync preference to server\n     */\n    _syncToServer() {\n        if (!this.manager.client || !this.manager.client.connected) {\n            return;\n        }\n\n        // Send preference update event\n        this.manager.client.sendEvent(\n            0x10, // EventType.PREF (custom event type for preferences)\n            '',   // No HID needed\n            {\n                key: this.key,\n                value: this.value,\n                updatedAt: this.updatedAt.toISOString(),\n            }\n        );\n    }\n\n    /**\n     * Notify all subscribers of value change\n     */\n    _notifySubscribers(newValue, oldValue) {\n        for (const callback of this.subscribers) {\n            try {\n                callback(newValue, oldValue);\n            } catch (e) {\n                console.error('[Vango Prefs] Subscriber error:', e);\n            }\n        }\n    }\n\n    /**\n     * Check if two values are equal\n     */\n    _isEqual(a, b) {\n        if (a === b) return true;\n        if (typeof a !== typeof b) return false;\n        if (typeof a === 'object' && a !== null && b !== null) {\n            return JSON.stringify(a) === JSON.stringify(b);\n        }\n        return false;\n    }\n}\n\n/**\n * Default export for convenience\n */\nexport default PrefManager;\n"],
  "mappings": "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",
  "names": ["window"]
}
